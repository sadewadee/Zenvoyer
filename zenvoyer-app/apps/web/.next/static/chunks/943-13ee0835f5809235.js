(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{1157:(e,r,s)=>{"use strict";s.d(r,{X5:()=>l,nM:()=>i,zK:()=>n});var a=s(3916);let t=a.Yj().email("Invalid email address").trim().toLowerCase(),o=a.Yj().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number"),l=a.Ik({email:t,password:a.Yj().min(1,"Password is required")}),n=a.Ik({email:t,firstName:a.Yj().min(2,"First name must be at least 2 characters").max(50,"First name must be at most 50 characters").trim(),lastName:a.Yj().min(2,"Last name must be at least 2 characters").max(50,"Last name must be at most 50 characters").trim(),phoneNumber:a.Yj().regex(/^\+?[1-9]\d{1,14}$/,"Invalid phone number format").optional().or(a.eu("")),password:o,confirmPassword:a.Yj()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),i=a.Ik({oldPassword:a.Yj().min(1,"Old password is required"),newPassword:o,confirmPassword:a.Yj()}).refine(e=>e.newPassword===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}).refine(e=>e.oldPassword!==e.newPassword,{message:"New password must be different from old password",path:["newPassword"]})},1531:(e,r,s)=>{"use strict";s.r(r),s.d(r,{RegisterForm:()=>w,default:()=>x});var a=s(4568);s(7620);var t=s(3631),o=s(2935),l=s(7541),n=s(9664),i=s.n(n),c=s(1157),d=s(6640),m=s(8350),u=s(3046),h=s(7248),p=s(2151);let w=()=>{let e=(0,l.useRouter)(),{register:r,isLoading:s}=(0,d.h)(),{addNotification:n}=(0,m.j)(),{register:w,handleSubmit:x,formState:{errors:f}}=(0,t.mN)({resolver:(0,o.u)(c.zK),defaultValues:{email:"",firstName:"",lastName:"",phoneNumber:"",password:"",confirmPassword:""}}),b=async s=>{try{let a=await r(s.email,s.password,s.firstName,s.lastName);a.success?(n({type:u._n.SUCCESS,message:"Account created successfully!",duration:3e3}),e.push(h.bw.DASHBOARD)):n({type:u._n.ERROR,message:a.error||"Registration failed",duration:5e3})}catch(e){n({type:u._n.ERROR,message:"An unexpected error occurred",duration:5e3})}};return(0,a.jsx)("div",{className:"w-full max-w-md mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 md:p-8",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:"Create Account"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Start managing your invoices today"}),(0,a.jsxs)("form",{onSubmit:x(b),className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(p.zB,{...w("firstName"),label:"First Name",placeholder:"John",error:f.firstName,required:!0}),(0,a.jsx)(p.zB,{...w("lastName"),label:"Last Name",placeholder:"Doe",error:f.lastName,required:!0})]}),(0,a.jsx)(p.zB,{...w("email"),type:"email",label:"Email Address",placeholder:"you@example.com",error:f.email,required:!0}),(0,a.jsx)(p.zB,{...w("phoneNumber"),type:"tel",label:"Phone Number (Optional)",placeholder:"+1234567890",error:f.phoneNumber}),(0,a.jsx)(p.zB,{...w("password"),type:"password",label:"Password",placeholder:"••••••••",error:f.password,helperText:"At least 8 characters with uppercase, lowercase, and numbers",required:!0}),(0,a.jsx)(p.zB,{...w("confirmPassword"),type:"password",label:"Confirm Password",placeholder:"••••••••",error:f.confirmPassword,required:!0}),(0,a.jsx)(p.$n,{type:"submit",fullWidth:!0,loading:s,disabled:s,children:"Create Account"})]}),(0,a.jsxs)("p",{className:"text-center text-gray-600 text-sm mt-6",children:["Already have an account?"," ",(0,a.jsx)(i(),{href:h.bw.LOGIN,className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Sign in"})]})]})})},x=w},5183:(e,r,s)=>{"use strict";s.r(r),s.d(r,{LoginForm:()=>w,default:()=>x});var a=s(4568);s(7620);var t=s(3631),o=s(2935),l=s(7541),n=s(9664),i=s.n(n),c=s(1157),d=s(6640),m=s(8350),u=s(3046),h=s(7248),p=s(2151);let w=()=>{let e=(0,l.useRouter)(),{login:r,isLoading:s}=(0,d.h)(),{addNotification:n}=(0,m.j)(),{register:w,handleSubmit:x,formState:{errors:f}}=(0,t.mN)({resolver:(0,o.u)(c.X5),defaultValues:{email:"",password:""}}),b=async s=>{try{let a=await r(s.email,s.password);a.success?(n({type:u._n.SUCCESS,message:"Welcome back!",duration:3e3}),e.push(h.bw.DASHBOARD)):n({type:u._n.ERROR,message:a.error||"Login failed",duration:5e3})}catch(e){n({type:u._n.ERROR,message:"An unexpected error occurred",duration:5e3})}};return(0,a.jsx)("div",{className:"w-full max-w-md mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 md:p-8",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Sign in to your Zenvoyer account"}),(0,a.jsxs)("form",{onSubmit:x(b),className:"space-y-4",children:[(0,a.jsx)(p.zB,{...w("email"),type:"email",label:"Email Address",placeholder:"you@example.com",error:f.email,required:!0}),(0,a.jsx)(p.zB,{...w("password"),type:"password",label:"Password",placeholder:"••••••••",error:f.password,required:!0}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(i(),{href:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-700 transition-colors",children:"Forgot password?"})}),(0,a.jsx)(p.$n,{type:"submit",fullWidth:!0,loading:s,disabled:s,children:"Sign In"})]}),(0,a.jsxs)("p",{className:"text-center text-gray-600 text-sm mt-6",children:["Don't have an account?"," ",(0,a.jsx)(i(),{href:h.bw.REGISTER,className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Create one"})]})]})})},x=w},5214:(e,r,s)=>{"use strict";s.d(r,{Z:()=>o});var a=s(7156),t=s(7248);let o={register:e=>(0,a.bE)(t.Sn.AUTH_REGISTER,e),login:e=>(0,a.bE)(t.Sn.AUTH_LOGIN,e),getCurrentUser:()=>(0,a.Jt)(t.Sn.AUTH_ME),changePassword:e=>(0,a.F6)(t.Sn.AUTH_CHANGE_PASSWORD,e)}},6640:(e,r,s)=>{"use strict";s.d(r,{h:()=>c});var a=s(7620);let t=(0,s(1367).vt)(e=>({user:null,isLoading:!1,isAuthenticated:!1,setUser:r=>e({user:r,isAuthenticated:!!r}),setLoading:r=>e({isLoading:r}),login:r=>e({user:r,isAuthenticated:!0}),logout:()=>e({user:null,isAuthenticated:!1})}));var o=s(5214),l=s(7156),n=s(7248),i=s(796);function c(e){var r;let{user:s,isLoading:c,isAuthenticated:d,logout:m,setUser:u,setLoading:h}=t(),[p,w]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem(n.il);if(e){(0,l.O5)(e);let r=await o.Z.getCurrentUser();u(r)}}catch(e){(0,l.Tp)(),localStorage.removeItem(n.il)}finally{w(!0)}})()},[u]);let x=(0,a.useCallback)(async(r,s)=>{try{h(!0);let e=await o.Z.login({email:r,password:s});localStorage.setItem(n.il,e.accessToken),(0,l.O5)(e.accessToken);let{accessToken:a,...t}=e;return u(t),{success:!0}}catch(r){var a;return null==e||null==(a=e.onAuthError)||a.call(e,r),{success:!1,error:(0,i.u1)(r)}}finally{h(!1)}},[h,u,e]),f=(0,a.useCallback)(()=>{localStorage.removeItem(n.il),(0,l.Tp)(),m()},[m]),b=(0,a.useCallback)(async(r,s,a,t)=>{try{h(!0);let e=await o.Z.register({email:r,password:s,confirmPassword:s,firstName:a,lastName:t});localStorage.setItem(n.il,e.accessToken),(0,l.O5)(e.accessToken);let{accessToken:i,...c}=e;return u(c),{success:!0}}catch(r){var c;return null==e||null==(c=e.onAuthError)||c.call(e,r),{success:!1,error:(0,i.u1)(r)}}finally{h(!1)}},[h,u,e]),g=(0,a.useCallback)(e=>!0,[]),y=(null==s||null==(r=s.subscription)?void 0:r.plan)==="pro";return(0,a.useEffect)(()=>{let r=()=>{var r;f(),null==e||null==(r=e.onAuthError)||r.call(e,Error("Unauthorized"))};return window.addEventListener("auth-error",r),()=>window.removeEventListener("auth-error",r)},[f,e]),{user:s,isLoading:c,isAuthenticated:d,initalized:p,isPro:y,login:x,logout:f,register:b,hasPermission:g}}},7324:(e,r,s)=>{Promise.resolve().then(s.bind(s,5183)),Promise.resolve().then(s.bind(s,1531))},7541:(e,r,s)=>{"use strict";var a=s(3041);s.o(a,"usePathname")&&s.d(r,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(r,{useRouter:function(){return a.useRouter}})}}]);