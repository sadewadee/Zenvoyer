(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{796:(e,t,r)=>{"use strict";r.d(t,{u1:()=>a});var s=r(6530);function a(e){if(e instanceof s.uV)return e.message;if(e instanceof s.uV)switch(e.type){case s.By.VALIDATION:return"Please check your input and try again";case s.By.AUTHENTICATION:return"Your session has expired. Please log in again";case s.By.AUTHORIZATION:return"You do not have permission to perform this action";case s.By.NOT_FOUND:return"The requested resource was not found";case s.By.CONFLICT:return"This resource already exists";case s.By.SERVER_ERROR:return"Server error. Please try again later";case s.By.NETWORK_ERROR:return"Network error. Please check your internet connection";default:return e.message}return e instanceof Error?e.message:"An unexpected error occurred"}r(3046)},3046:(e,t,r)=>{"use strict";r.d(t,{Eo:()=>i,Sj:()=>n,Sx:()=>s,_n:()=>c,g5:()=>a,sO:()=>o});var s=function(e){return e.DRAFT="draft",e.SENT="sent",e.VIEWED="viewed",e.PAID="paid",e.PARTIAL="partial",e.OVERDUE="overdue",e}({}),a=function(e){return e.BANK_TRANSFER="bank_transfer",e.CREDIT_CARD="credit_card",e.DEBIT_CARD="debit_card",e.E_WALLET="e_wallet",e.CASH="cash",e}({}),n=function(e){return e.USD="USD",e.EUR="EUR",e.GBP="GBP",e.JPY="JPY",e.IDR="IDR",e.AUD="AUD",e.CAD="CAD",e.SGD="SGD",e}({}),c=function(e){return e.INFO="info",e.SUCCESS="success",e.WARNING="warning",e.ERROR="error",e}({});let o={draft:{label:"Draft",color:"bg-gray-100 text-gray-700",variant:"secondary"},sent:{label:"Sent",color:"bg-blue-100 text-blue-700",variant:"info"},viewed:{label:"Viewed",color:"bg-purple-100 text-purple-700",variant:"default"},paid:{label:"Paid",color:"bg-green-100 text-green-700",variant:"success"},partial:{label:"Partial",color:"bg-yellow-100 text-yellow-700",variant:"warning"},overdue:{label:"Overdue",color:"bg-red-100 text-red-700",variant:"destructive"}},i={bank_transfer:{label:"Bank Transfer",icon:"building-2"},credit_card:{label:"Credit Card",icon:"credit-card"},debit_card:{label:"Debit Card",icon:"credit-card"},e_wallet:{label:"E-Wallet",icon:"wallet"},cash:{label:"Cash",icon:"coins"}}},3865:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(4568),a=r(7620),n=r(7541),c=r(6640);function o(){let e=(0,n.useRouter)(),{isAuthenticated:t,isLoading:r}=(0,c.h)();return(0,a.useEffect)(()=>{r||(t?e.push("/dashboard"):e.push("/login"))},[t,r,e]),(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading Zenvoyer..."})]})})}},5214:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(7156),a=r(7248);let n={register:e=>(0,s.bE)(a.Sn.AUTH_REGISTER,e),login:e=>(0,s.bE)(a.Sn.AUTH_LOGIN,e),getCurrentUser:()=>(0,s.Jt)(a.Sn.AUTH_ME),changePassword:e=>(0,s.F6)(a.Sn.AUTH_CHANGE_PASSWORD,e)}},5276:(e,t,r)=>{Promise.resolve().then(r.bind(r,3865))},6530:(e,t,r)=>{"use strict";r.d(t,{By:()=>s,d7:()=>n,uV:()=>a});var s=function(e){return e.VALIDATION="VALIDATION",e.AUTHENTICATION="AUTHENTICATION",e.AUTHORIZATION="AUTHORIZATION",e.NOT_FOUND="NOT_FOUND",e.CONFLICT="CONFLICT",e.SERVER_ERROR="SERVER_ERROR",e.NETWORK_ERROR="NETWORK_ERROR",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e}({});class a extends Error{constructor(e,t,r=500,s){super(t),this.type=e,this.message=t,this.statusCode=r,this.details=s,this.name="AppError"}}let n=e=>e instanceof a},6640:(e,t,r)=>{"use strict";r.d(t,{h:()=>u});var s=r(7620);let a=(0,r(1367).vt)(e=>({user:null,isLoading:!1,isAuthenticated:!1,setUser:t=>e({user:t,isAuthenticated:!!t}),setLoading:t=>e({isLoading:t}),login:t=>e({user:t,isAuthenticated:!0}),logout:()=>e({user:null,isAuthenticated:!1})}));var n=r(5214),c=r(7156),o=r(7248),i=r(796);function u(e){var t;let{user:r,isLoading:u,isAuthenticated:l,logout:E,setUser:d,setLoading:T}=a(),[I,R]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem(o.il);if(e){(0,c.O5)(e);let t=await n.Z.getCurrentUser();d(t)}}catch(e){(0,c.Tp)(),localStorage.removeItem(o.il)}finally{R(!0)}})()},[d]);let A=(0,s.useCallback)(async(t,r)=>{try{T(!0);let e=await n.Z.login({email:t,password:r});localStorage.setItem(o.il,e.accessToken),(0,c.O5)(e.accessToken);let{accessToken:s,...a}=e;return d(a),{success:!0}}catch(t){var s;return null==e||null==(s=e.onAuthError)||s.call(e,t),{success:!1,error:(0,i.u1)(t)}}finally{T(!1)}},[T,d,e]),N=(0,s.useCallback)(()=>{localStorage.removeItem(o.il),(0,c.Tp)(),E()},[E]),_=(0,s.useCallback)(async(t,r,s,a)=>{try{T(!0);let e=await n.Z.register({email:t,password:r,confirmPassword:r,firstName:s,lastName:a});localStorage.setItem(o.il,e.accessToken),(0,c.O5)(e.accessToken);let{accessToken:i,...u}=e;return d(u),{success:!0}}catch(t){var u;return null==e||null==(u=e.onAuthError)||u.call(e,t),{success:!1,error:(0,i.u1)(t)}}finally{T(!1)}},[T,d,e]),S=(0,s.useCallback)(e=>!0,[]),O=(null==r||null==(t=r.subscription)?void 0:t.plan)==="pro";return(0,s.useEffect)(()=>{let t=()=>{var t;N(),null==e||null==(t=e.onAuthError)||t.call(e,Error("Unauthorized"))};return window.addEventListener("auth-error",t),()=>window.removeEventListener("auth-error",t)},[N,e]),{user:r,isLoading:u,isAuthenticated:l,initalized:I,isPro:O,login:A,logout:N,register:_,hasPermission:S}}},7156:(e,t,r)=>{"use strict";let s;r.d(t,{ES:()=>o,F6:()=>d,Jt:()=>u,O5:()=>I,Tp:()=>R,bE:()=>l,yH:()=>T,yJ:()=>E});var a=r(1208),n=r(7248),c=r(6530);let o=()=>((s=a.A.create({baseURL:n.JR,timeout:n.dL,headers:{"Content-Type":"application/json"}})).interceptors.request.use(e=>{let t=localStorage.getItem(n.il);return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>{var t,r,s,a,o;let i=(null==(t=e.response)?void 0:t.status)||0,u=(e=>{switch(e){case 400:case 422:return c.By.VALIDATION;case 401:return c.By.AUTHENTICATION;case 403:return c.By.AUTHORIZATION;case 404:return c.By.NOT_FOUND;case 409:return c.By.CONFLICT;case 500:case 502:case 503:return c.By.SERVER_ERROR;default:return c.By.UNKNOWN_ERROR}})(i),l=(null==(s=e.response)||null==(r=s.data)?void 0:r.message)||e.message||"An error occurred",E=null==(o=e.response)||null==(a=o.data)?void 0:a.details,d=new c.uV(u,l,i,E);return 401===i&&(localStorage.removeItem(n.il),window.dispatchEvent(new CustomEvent("auth-error"))),Promise.reject(d)}),s);async function i(e,t){try{let r=(s||o(),s);return(await r.request({url:e,...t})).data}catch(e){if((0,c.d7)(e))throw e;if(e instanceof Error&&("Network Error"===e.message||e.message.includes("ECONNABORTED")))throw new c.uV(c.By.NETWORK_ERROR,"Network connection failed. Please check your internet connection.",0);throw new c.uV(c.By.UNKNOWN_ERROR,e instanceof Error?e.message:"An unexpected error occurred",500)}}async function u(e,t){return i(e,{...t,method:"GET"})}async function l(e,t,r){return i(e,{...r,method:"POST",data:t})}async function E(e,t,r){return i(e,{...r,method:"PUT",data:t})}async function d(e,t,r){return i(e,{...r,method:"PATCH",data:t})}async function T(e,t){return i(e,{...t,method:"DELETE"})}function I(e){o(),e?(s.defaults.headers.common.Authorization="Bearer ".concat(e),localStorage.setItem(n.il,e)):(delete s.defaults.headers.common.Authorization,localStorage.removeItem(n.il))}function R(){o(),delete s.defaults.headers.common.Authorization,localStorage.removeItem(n.il)}},7248:(e,t,r)=>{"use strict";r.d(t,{JR:()=>s,Kn:()=>o,Sn:()=>u,b6:()=>c,bw:()=>i,dL:()=>a,il:()=>n});let s="http://localhost:3001/api",a=3e4,n="access_token",c={CURRENCY:"USD",TAX_RATE:0,DISCOUNT_RATE:0,DEFAULT_PAYMENT_METHOD:"bank_transfer"},o={DISPLAY:"MMM dd, yyyy",ISO:"yyyy-MM-dd",WITH_TIME:"MMM dd, yyyy HH:mm"},i={HOME:"/",LOGIN:"/login",REGISTER:"/register",DASHBOARD:"/dashboard",INVOICES:"/invoices",INVOICE_CREATE:"/invoices/create",INVOICE_EDIT:"/invoices/:id/edit",INVOICE_VIEW:"/invoices/:id",CLIENTS:"/clients",CLIENT_CREATE:"/clients/create",CLIENT_EDIT:"/clients/:id/edit",PRODUCTS:"/products",PRODUCT_CREATE:"/products/create",PRODUCT_EDIT:"/products/:id/edit",PAYMENTS:"/payments",SETTINGS:"/settings",PROFILE:"/settings/profile",SECURITY:"/settings/security"},u={AUTH_REGISTER:"/auth/register",AUTH_LOGIN:"/auth/login",AUTH_ME:"/auth/me",AUTH_CHANGE_PASSWORD:"/auth/change-password",INVOICES:"/invoices",INVOICE_BY_ID:e=>"/invoices/".concat(e),INVOICE_SEND:e=>"/invoices/".concat(e,"/send"),INVOICE_PAYMENTS:e=>"/invoices/".concat(e,"/payments"),INVOICE_STATUS:e=>"/invoices/".concat(e,"/status"),INVOICE_SHARE:e=>"/invoices/".concat(e,"/share"),INVOICE_STATS:"/invoices/stats/summary",INVOICE_PUBLIC:e=>"/invoices/public/".concat(e),CLIENTS:"/clients",CLIENT_BY_ID:e=>"/clients/".concat(e),CLIENTS_IMPORT:"/clients/import",PRODUCTS:"/products",PRODUCT_BY_ID:e=>"/products/".concat(e),DASHBOARD_USER:"/dashboards/user",DASHBOARD_ADMIN:"/dashboards/admin",DASHBOARD_SUPER_ADMIN:"/dashboards/super-admin",USER_PROFILE:"/users/profile",USER_SUB_USERS:"/users/sub-users",USER_SUB_USERS_INVITE:"/users/sub-users/invite",USER_SUB_USERS_ACCEPT:"/users/sub-users/accept-invitation",USER_SUB_USERS_PERMISSIONS:e=>"/users/sub-users/".concat(e,"/permissions"),USER_SUB_USERS_REMOVE:e=>"/users/sub-users/".concat(e),PAYMENT_GATEWAY_SETUP:"/payments/gateway/setup",PAYMENT_GATEWAY:e=>"/payments/gateway/".concat(e),PAYMENT_GATEWAY_LIST:"/payments/gateway/list",PAYMENT_INITIATE:"/payments/initiate",PAYMENT_VERIFY:"/payments/verify",PAYMENT_LINK:(e,t)=>"/payments/link/".concat(e,"/").concat(t),PAYMENT_HISTORY:e=>"/payments/history/".concat(e),ADMIN_USERS:"/admin/super/users",ADMIN_USER_BY_ID:e=>"/admin/super/users/".concat(e),ADMIN_USER_BAN:e=>"/admin/super/users/".concat(e,"/ban"),ADMIN_ADMINS:"/admin/super/admins",ADMIN_STATISTICS:"/admin/super/statistics",ADMIN_ACTIVITY_LOGS:"/admin/super/activity-logs",ADMIN_HEALTH:"/admin/super/health"}},7541:(e,t,r)=>{"use strict";var s=r(3041);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})}},e=>{e.O(0,[2898,587,18,7358],()=>e(e.s=5276)),_N_E=e.O()}]);