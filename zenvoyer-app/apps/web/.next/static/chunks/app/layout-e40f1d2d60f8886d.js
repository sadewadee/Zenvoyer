(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{4433:(e,t,s)=>{"use strict";s.d(t,{AppProvider:()=>P});var r=s(4568),i=s(7620),a=s(9950),n=s(8239),u=s(5635),l=s(2844),o=class extends l.Q{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,s){let r=t.queryKey,i=t.queryHash??(0,a.F$)(r,t),u=this.get(i);return u||(u=new n.X({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(u)),u}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){u.jG.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,a.MK)(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,a.MK)(e,t)):t}notify(e){u.jG.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){u.jG.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){u.jG.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},h=s(730),c=class extends l.Q{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#s=new Map,this.#r=0}#t;#s;#r;build(e,t,s){let r=new h.s({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){this.#t.add(e);let t=f(e);if("string"==typeof t){let s=this.#s.get(t);s?s.push(e):this.#s.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){let t=f(e);if("string"==typeof t){let s=this.#s.get(t);if(s)if(s.length>1){let t=s.indexOf(e);-1!==t&&s.splice(t,1)}else s[0]===e&&this.#s.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){let t=f(e);if("string"!=typeof t)return!0;{let s=this.#s.get(t),r=s?.find(e=>"pending"===e.state.status);return!r||r===e}}runNext(e){let t=f(e);if("string"!=typeof t)return Promise.resolve();{let s=this.#s.get(t)?.find(t=>t!==e&&t.state.isPaused);return s?.continue()??Promise.resolve()}}clear(){u.jG.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#s.clear()})}getAll(){return Array.from(this.#t)}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,a.nJ)(t,e))}findAll(e={}){return this.getAll().filter(t=>(0,a.nJ)(e,t))}notify(e){u.jG.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return u.jG.batch(()=>Promise.all(e.map(e=>e.continue().catch(a.lQ))))}};function f(e){return e.options.scope?.id}var d=s(9382),y=s(4189);function p(e){return{onFetch:(t,s)=>{let r=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,n=t.state.data?.pages||[],u=t.state.data?.pageParams||[],l={pages:[],pageParams:[]},o=0,h=async()=>{let s=!1,h=(0,a.ZM)(t.options,t.fetchOptions),c=async(e,r,i)=>{if(s)return Promise.reject();if(null==r&&e.pages.length)return Promise.resolve(e);let n=(()=>{let e={client:t.client,queryKey:t.queryKey,pageParam:r,direction:i?"backward":"forward",meta:t.options.meta};return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(t.signal.aborted?s=!0:t.signal.addEventListener("abort",()=>{s=!0}),t.signal)}),e})(),u=await h(n),{maxPages:l}=t.options,o=i?a.ZZ:a.y9;return{pages:o(e.pages,u,l),pageParams:o(e.pageParams,r,l)}};if(i&&n.length){let e="backward"===i,t={pages:n,pageParams:u},s=(e?function(e,{pages:t,pageParams:s}){return t.length>0?e.getPreviousPageParam?.(t[0],t,s[0],s):void 0}:m)(r,t);l=await c(t,s,e)}else{let t=e??n.length;do{let e=0===o?u[0]??r.initialPageParam:m(r,l);if(o>0&&null==e)break;l=await c(l,e),o++}while(o<t)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s):t.fetchFn=h}}}function m(e,{pages:t,pageParams:s}){let r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,s[r],s):void 0}var g=class{#i;#a;#n;#u;#l;#o;#h;#c;constructor(e={}){this.#i=e.queryCache||new o,this.#a=e.mutationCache||new c,this.#n=e.defaultOptions||{},this.#u=new Map,this.#l=new Map,this.#o=0}mount(){this.#o++,1===this.#o&&(this.#h=d.m.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#i.onFocus())}),this.#c=y.t.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#i.onOnline())}))}unmount(){this.#o--,0===this.#o&&(this.#h?.(),this.#h=void 0,this.#c?.(),this.#c=void 0)}isFetching(e){return this.#i.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#a.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#i.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.defaultQueryOptions(e),s=this.#i.build(this,t),r=s.state.data;return void 0===r?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime((0,a.d2)(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return this.#i.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,s){let r=this.defaultQueryOptions({queryKey:e}),i=this.#i.get(r.queryHash),n=i?.state.data,u=(0,a.Zw)(t,n);if(void 0!==u)return this.#i.build(this,r).setData(u,{...s,manual:!0})}setQueriesData(e,t,s){return u.jG.batch(()=>this.#i.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,s)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#i.get(t.queryHash)?.state}removeQueries(e){let t=this.#i;u.jG.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let s=this.#i;return u.jG.batch(()=>(s.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){let s={revert:!0,...t};return Promise.all(u.jG.batch(()=>this.#i.findAll(e).map(e=>e.cancel(s)))).then(a.lQ).catch(a.lQ)}invalidateQueries(e,t={}){return u.jG.batch(()=>(this.#i.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))}refetchQueries(e,t={}){let s={...t,cancelRefetch:t.cancelRefetch??!0};return Promise.all(u.jG.batch(()=>this.#i.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,s);return s.throwOnError||(t=t.catch(a.lQ)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(a.lQ)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let s=this.#i.build(this,t);return s.isStaleByTime((0,a.d2)(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(a.lQ).catch(a.lQ)}fetchInfiniteQuery(e){return e.behavior=p(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(a.lQ).catch(a.lQ)}ensureInfiniteQueryData(e){return e.behavior=p(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return y.t.isOnline()?this.#a.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#i}getMutationCache(){return this.#a}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,t){this.#u.set((0,a.EN)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#u.values()],s={};return t.forEach(t=>{(0,a.Cp)(e,t.queryKey)&&Object.assign(s,t.defaultOptions)}),s}setMutationDefaults(e,t){this.#l.set((0,a.EN)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#l.values()],s={};return t.forEach(t=>{(0,a.Cp)(e,t.mutationKey)&&Object.assign(s,t.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,a.F$)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===a.hT&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#i.clear(),this.#a.clear()}},b=s(4869),v=s(6640),q=s(7156),O=s(2151);let C=new g({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,retry:1},mutations:{retry:1}}}),Q=()=>{let{initalized:e}=(0,v.h)();return(0,i.useEffect)(()=>{(0,q.ES)()},[]),null},P=e=>{let{children:t}=e;return(0,r.jsxs)(b.Ht,{client:C,children:[(0,r.jsx)(Q,{}),(0,r.jsx)(O.ph,{}),t]})}},5214:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(7156),i=s(7248);let a={register:e=>(0,r.bE)(i.Sn.AUTH_REGISTER,e),login:e=>(0,r.bE)(i.Sn.AUTH_LOGIN,e),getCurrentUser:()=>(0,r.Jt)(i.Sn.AUTH_ME),changePassword:e=>(0,r.F6)(i.Sn.AUTH_CHANGE_PASSWORD,e)}},6640:(e,t,s)=>{"use strict";s.d(t,{h:()=>o});var r=s(7620);let i=(0,s(1367).vt)(e=>({user:null,isLoading:!1,isAuthenticated:!1,setUser:t=>e({user:t,isAuthenticated:!!t}),setLoading:t=>e({isLoading:t}),login:t=>e({user:t,isAuthenticated:!0}),logout:()=>e({user:null,isAuthenticated:!1})}));var a=s(5214),n=s(7156),u=s(7248),l=s(796);function o(e){var t;let{user:s,isLoading:o,isAuthenticated:h,logout:c,setUser:f,setLoading:d}=i(),[y,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem(u.il);if(e){(0,n.O5)(e);let t=await a.Z.getCurrentUser();f(t)}}catch(e){(0,n.Tp)(),localStorage.removeItem(u.il)}finally{p(!0)}})()},[f]);let m=(0,r.useCallback)(async(t,s)=>{try{d(!0);let e=await a.Z.login({email:t,password:s});localStorage.setItem(u.il,e.accessToken),(0,n.O5)(e.accessToken);let{accessToken:r,...i}=e;return f(i),{success:!0}}catch(t){var r;return null==e||null==(r=e.onAuthError)||r.call(e,t),{success:!1,error:(0,l.u1)(t)}}finally{d(!1)}},[d,f,e]),g=(0,r.useCallback)(()=>{localStorage.removeItem(u.il),(0,n.Tp)(),c()},[c]),b=(0,r.useCallback)(async(t,s,r,i)=>{try{d(!0);let e=await a.Z.register({email:t,password:s,confirmPassword:s,firstName:r,lastName:i});localStorage.setItem(u.il,e.accessToken),(0,n.O5)(e.accessToken);let{accessToken:l,...o}=e;return f(o),{success:!0}}catch(t){var o;return null==e||null==(o=e.onAuthError)||o.call(e,t),{success:!1,error:(0,l.u1)(t)}}finally{d(!1)}},[d,f,e]),v=(0,r.useCallback)(e=>!0,[]),q=(null==s||null==(t=s.subscription)?void 0:t.plan)==="pro";return(0,r.useEffect)(()=>{let t=()=>{var t;g(),null==e||null==(t=e.onAuthError)||t.call(e,Error("Unauthorized"))};return window.addEventListener("auth-error",t),()=>window.removeEventListener("auth-error",t)},[g,e]),{user:s,isLoading:o,isAuthenticated:h,initalized:y,isPro:q,login:m,logout:g,register:b,hasPermission:v}}},7924:(e,t,s)=>{Promise.resolve().then(s.bind(s,4433)),Promise.resolve().then(s.t.bind(s,8761,23))},8761:()=>{}},e=>{e.O(0,[9950,2898,981,5982,587,18,7358],()=>e(e.s=7924)),_N_E=e.O()}]);