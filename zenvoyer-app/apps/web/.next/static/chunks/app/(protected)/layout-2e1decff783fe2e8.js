(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4163],{2381:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>f});var s=t(4568),l=t(7620),a=t(9664),n=t.n(a),i=t(6640),o=t(8350),c=t(7248);let u=()=>{var e;let{user:r,logout:t}=(0,i.h)(),{sidebarOpen:a,setSidebarOpen:u}=(0,o.j)(),[d,h]=(0,l.useState)(!1);return(0,s.jsx)("nav",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-40",children:(0,s.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>u(!a),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:"☰"}),(0,s.jsx)(n(),{href:c.bw.DASHBOARD,className:"text-xl font-bold text-blue-600",children:"Zenvoyer"})]}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>h(!d),className:"flex items-center gap-2 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-semibold",children:null==r||null==(e=r.firstName)?void 0:e.charAt(0)}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[null==r?void 0:r.firstName," ",null==r?void 0:r.lastName]}),(0,s.jsx)("span",{className:"text-gray-600",children:"▼"})]}),d&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg py-1 z-50",children:[(0,s.jsx)(n(),{href:c.bw.PROFILE,className:"block px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>h(!1),children:"Profile Settings"}),(0,s.jsx)(n(),{href:c.bw.SECURITY,className:"block px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>h(!1),children:"Security"}),(0,s.jsx)("hr",{className:"my-1"}),(0,s.jsx)("button",{onClick:()=>{t(),h(!1)},className:"w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 transition-colors",children:"Logout"})]})]})})]})})};var d=t(7541),h=t(9317);let m=[{label:"Dashboard",href:c.bw.DASHBOARD,icon:"\uD83D\uDCCA"},{label:"Invoices",href:c.bw.INVOICES,icon:"\uD83D\uDCC4"},{label:"Clients",href:c.bw.CLIENTS,icon:"\uD83D\uDC65"},{label:"Products",href:c.bw.PRODUCTS,icon:"\uD83D\uDCE6"},{label:"Payments",href:c.bw.PAYMENTS,icon:"\uD83D\uDCB3"}],x=()=>{let e=(0,d.usePathname)(),{sidebarOpen:r}=(0,o.j)();return(0,s.jsxs)("aside",{className:(0,h.cn)("fixed left-0 top-16 bottom-0 bg-gray-900 text-white transition-all duration-300 ease-in-out z-30",r?"w-64":"w-20"),children:[(0,s.jsx)("nav",{className:"p-4 space-y-2",children:m.map(t=>{let l=e===t.href||e.startsWith(t.href+"/");return(0,s.jsxs)(n(),{href:t.href,className:(0,h.cn)("flex items-center gap-3 px-4 py-3 rounded-lg transition-colors",l?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),title:r?void 0:t.label,children:[(0,s.jsx)("span",{className:"text-xl flex-shrink-0",children:t.icon}),r&&(0,s.jsx)("span",{className:"text-sm font-medium",children:t.label})]},t.href)})}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 border-t border-gray-700 p-4 space-y-2",children:(0,s.jsxs)(n(),{href:c.bw.SETTINGS,className:(0,h.cn)("flex items-center gap-3 px-4 py-3 rounded-lg transition-colors",e===c.bw.SETTINGS?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),title:r?void 0:"Settings",children:[(0,s.jsx)("span",{className:"text-xl flex-shrink-0",children:"⚙️"}),r&&(0,s.jsx)("span",{className:"text-sm font-medium",children:"Settings"})]})})]})};var g=t(2151);let b=e=>{let{children:r}=e,{isAuthenticated:t,initalized:l}=(0,i.h)(),{sidebarOpen:a}=(0,o.j)();return l?t?(0,s.jsx)(g.tH,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,s.jsx)(u,{}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(x,{}),(0,s.jsx)("main",{className:(0,h.cn)("flex-1 transition-all duration-300 ease-in-out",a?"ml-64":"ml-20"),children:(0,s.jsx)("div",{className:"p-6 min-h-[calc(100vh-64px)]",children:r})})]})]})}):(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:"Please log in to continue."}):(0,s.jsx)(g.kt,{fullScreen:!0})};function f(e){let{children:r}=e;return(0,s.jsx)(b,{children:r})}},2902:(e,r,t)=>{"use strict";function s(){for(var e,r,t=0,s="",l=arguments.length;t<l;t++)(e=arguments[t])&&(r=function e(r){var t,s,l="";if("string"==typeof r||"number"==typeof r)l+=r;else if("object"==typeof r)if(Array.isArray(r)){var a=r.length;for(t=0;t<a;t++)r[t]&&(s=e(r[t]))&&(l&&(l+=" "),l+=s)}else for(s in r)r[s]&&(l&&(l+=" "),l+=s);return l}(e))&&(s&&(s+=" "),s+=r);return s}t.d(r,{$:()=>s})},4097:(e,r,t)=>{Promise.resolve().then(t.bind(t,2381))},5214:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});var s=t(7156),l=t(7248);let a={register:e=>(0,s.bE)(l.Sn.AUTH_REGISTER,e),login:e=>(0,s.bE)(l.Sn.AUTH_LOGIN,e),getCurrentUser:()=>(0,s.Jt)(l.Sn.AUTH_ME),changePassword:e=>(0,s.F6)(l.Sn.AUTH_CHANGE_PASSWORD,e)}},6640:(e,r,t)=>{"use strict";t.d(r,{h:()=>c});var s=t(7620);let l=(0,t(1367).vt)(e=>({user:null,isLoading:!1,isAuthenticated:!1,setUser:r=>e({user:r,isAuthenticated:!!r}),setLoading:r=>e({isLoading:r}),login:r=>e({user:r,isAuthenticated:!0}),logout:()=>e({user:null,isAuthenticated:!1})}));var a=t(5214),n=t(7156),i=t(7248),o=t(796);function c(e){var r;let{user:t,isLoading:c,isAuthenticated:u,logout:d,setUser:h,setLoading:m}=l(),[x,g]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem(i.il);if(e){(0,n.O5)(e);let r=await a.Z.getCurrentUser();h(r)}}catch(e){(0,n.Tp)(),localStorage.removeItem(i.il)}finally{g(!0)}})()},[h]);let b=(0,s.useCallback)(async(r,t)=>{try{m(!0);let e=await a.Z.login({email:r,password:t});localStorage.setItem(i.il,e.accessToken),(0,n.O5)(e.accessToken);let{accessToken:s,...l}=e;return h(l),{success:!0}}catch(r){var s;return null==e||null==(s=e.onAuthError)||s.call(e,r),{success:!1,error:(0,o.u1)(r)}}finally{m(!1)}},[m,h,e]),f=(0,s.useCallback)(()=>{localStorage.removeItem(i.il),(0,n.Tp)(),d()},[d]),v=(0,s.useCallback)(async(r,t,s,l)=>{try{m(!0);let e=await a.Z.register({email:r,password:t,confirmPassword:t,firstName:s,lastName:l});localStorage.setItem(i.il,e.accessToken),(0,n.O5)(e.accessToken);let{accessToken:o,...c}=e;return h(c),{success:!0}}catch(r){var c;return null==e||null==(c=e.onAuthError)||c.call(e,r),{success:!1,error:(0,o.u1)(r)}}finally{m(!1)}},[m,h,e]),p=(0,s.useCallback)(e=>!0,[]),y=(null==t||null==(r=t.subscription)?void 0:r.plan)==="pro";return(0,s.useEffect)(()=>{let r=()=>{var r;f(),null==e||null==(r=e.onAuthError)||r.call(e,Error("Unauthorized"))};return window.addEventListener("auth-error",r),()=>window.removeEventListener("auth-error",r)},[f,e]),{user:t,isLoading:c,isAuthenticated:u,initalized:x,isPro:y,login:b,logout:f,register:v,hasPermission:p}}},7541:(e,r,t)=>{"use strict";var s=t(3041);t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})}},e=>{e.O(0,[2898,9664,5982,587,18,7358],()=>e(e.s=4097)),_N_E=e.O()}]);