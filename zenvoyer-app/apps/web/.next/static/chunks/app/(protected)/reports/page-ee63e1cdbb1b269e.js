(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[244],{3578:(e,t,s)=>{Promise.resolve().then(s.bind(s,5673))},5400:(e,t,s)=>{"use strict";s.d(t,{$:()=>n});var a=s(4568),l=s(7620),r=s(5703);let n=l.forwardRef((e,t)=>{let{className:s,variant:l="default",...n}=e;return(0,a.jsx)("button",{className:(0,r.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none px-4 py-2",{default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-gray-300 bg-transparent hover:bg-gray-100",ghost:"hover:bg-gray-100"}[l],s),ref:t,...n})});n.displayName="Button"},5673:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(4568),l=s(7620),r=s(8186),n=s(5703);let i=l.forwardRef((e,t)=>{let{className:s,defaultValue:r,children:i,...c}=e,[d,o]=l.useState(r);return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("w-full",s),...c,children:l.Children.map(i,e=>l.isValidElement(e)?l.cloneElement(e,{value:d,onValueChange:o}):e)})});i.displayName="Tabs";let c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1",s),...l})});c.displayName="TabsList";let d=l.forwardRef((e,t)=>{let{className:s,value:l,activeValue:r,...i}=e;return(0,a.jsx)("button",{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",l===r?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-900",s),...i})});d.displayName="TabsTrigger";let o=l.forwardRef((e,t)=>{let{className:s,value:l,activeValue:r,...i}=e;return l!==r?null:(0,a.jsx)("div",{ref:t,className:(0,n.cn)("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",s),...i})});o.displayName="TabsContent";var x=s(5400),f=s(9977);function m(){let[e,t]=(0,l.useState)({start:"",end:""}),[s,n]=(0,l.useState)(null),[m,u]=(0,l.useState)(null),[h,p]=(0,l.useState)([]),[j,g]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=new Date,s=new Date;s.setDate(s.getDate()-30),t({start:s.toISOString().split("T")[0],end:e.toISOString().split("T")[0]})},[]);let v=async()=>{g(!0);try{let t=await fetch("/api/reports/profit-loss?startDate=".concat(e.start,"&endDate=").concat(e.end));if(t.ok){let e=await t.json();n(e)}}catch(e){console.error("Failed to fetch P&L")}finally{g(!1)}},b=async()=>{g(!0);try{let t=await fetch("/api/reports/tax-summary?startDate=".concat(e.start,"&endDate=").concat(e.end));if(t.ok){let e=await t.json();u(e)}}catch(e){console.error("Failed to fetch tax summary")}finally{g(!1)}},N=async()=>{g(!0);try{let t=await fetch("/api/reports/client-revenue?startDate=".concat(e.start,"&endDate=").concat(e.end));if(t.ok){let e=await t.json();p(e)}}catch(e){console.error("Failed to fetch client revenue")}finally{g(!1)}},y=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Advanced Reports"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Detailed financial insights and analytics"})]}),(0,a.jsx)(f.E,{className:"bg-purple-100 text-purple-800",children:"Pro Feature"})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsx)(r.ZB,{className:"text-lg",children:"Date Range"})}),(0,a.jsxs)(r.Wu,{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-sm",children:"From:"}),(0,a.jsx)("input",{type:"date",value:e.start,onChange:s=>t({...e,start:s.target.value}),className:"border rounded px-3 py-2"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-sm",children:"To:"}),(0,a.jsx)("input",{type:"date",value:e.end,onChange:s=>t({...e,end:s.target.value}),className:"border rounded px-3 py-2"})]})]})]}),(0,a.jsxs)(i,{defaultValue:"profit-loss",children:[(0,a.jsxs)(c,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(d,{value:"profit-loss",children:"Profit & Loss"}),(0,a.jsx)(d,{value:"tax",children:"Tax Summary"}),(0,a.jsx)(d,{value:"clients",children:"Client Revenue"})]}),(0,a.jsxs)(o,{value:"profit-loss",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Profit & Loss Report"}),(0,a.jsx)(x.$,{onClick:v,disabled:j,children:j?"Loading...":"Generate Report"})]}),s&&(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsx)(r.ZB,{className:"text-sm text-gray-600",children:"Total Revenue"})}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:y(s.totalRevenue||0)})})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsx)(r.ZB,{className:"text-sm text-gray-600",children:"Total Costs"})}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:y(s.totalCosts||0)})})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsx)(r.ZB,{className:"text-sm text-gray-600",children:"Net Profit"})}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:y(s.netProfit||0)}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Margin: ",s.profitMargin||0,"%"]})]})]})]})]}),(0,a.jsxs)(o,{value:"tax",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Tax Summary"}),(0,a.jsx)(x.$,{onClick:b,disabled:j,children:j?"Loading...":"Generate Report"})]}),m&&(0,a.jsx)(r.Zp,{children:(0,a.jsxs)(r.Wu,{className:"pt-6",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:y(m.totalTaxCollected||0)}),(0,a.jsx)("p",{className:"text-gray-600",children:"Total Tax Collected"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["From ",m.invoiceCount||0," invoices"]})]})})]}),(0,a.jsxs)(o,{value:"clients",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Top Clients by Revenue"}),(0,a.jsx)(x.$,{onClick:N,disabled:j,children:j?"Loading...":"Generate Report"})]}),h.length>0&&(0,a.jsx)("div",{className:"space-y-2",children:h.slice(0,10).map((e,t)=>(0,a.jsx)(r.Zp,{children:(0,a.jsxs)(r.Wu,{className:"flex items-center justify-between py-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center font-semibold text-blue-600",children:t+1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:e.clientName}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.invoiceCount," invoices"]})]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("p",{className:"font-bold text-green-600",children:y(e.totalRevenue)})})]})},e.clientId))})]})]})]})}},5703:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r});var a=s(2902),l=s(3714);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.QP)((0,a.$)(t))}},8186:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>n,aR:()=>i,wL:()=>x});var a=s(4568),l=s(7620),r=s(5703);let n=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-white shadow-sm",s),...l})});n.displayName="Card";let i=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...l})});i.displayName="CardHeader";let c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...l})});c.displayName="CardTitle";let d=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-gray-500",s),...l})});d.displayName="CardDescription";let o=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...l})});o.displayName="CardContent";let x=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...l})});x.displayName="CardFooter"},9977:(e,t,s)=>{"use strict";s.d(t,{E:()=>r});var a=s(4568);s(7620);var l=s(5703);function r(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",t),...s})}}},e=>{e.O(0,[9289,587,18,7358],()=>e(e.s=3578)),_N_E=e.O()}]);