(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[163],{2381:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(4568),l=r(7620),a=r(9664),n=r.n(a),i=r(6640),o=r(8350),c=r(7248);let u=()=>{var e;let{user:t,logout:r}=(0,i.h)(),{sidebarOpen:a,setSidebarOpen:u}=(0,o.j)(),[d,h]=(0,l.useState)(!1);return(0,s.jsx)("nav",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-40",children:(0,s.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>u(!a),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:"☰"}),(0,s.jsx)(n(),{href:c.bw.DASHBOARD,className:"text-xl font-bold text-blue-600",children:"Zenvoyer"})]}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>h(!d),className:"flex items-center gap-2 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-semibold",children:null==t||null==(e=t.firstName)?void 0:e.charAt(0)}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[null==t?void 0:t.firstName," ",null==t?void 0:t.lastName]}),(0,s.jsx)("span",{className:"text-gray-600",children:"▼"})]}),d&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg py-1 z-50",children:[(0,s.jsx)(n(),{href:c.bw.PROFILE,className:"block px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>h(!1),children:"Profile Settings"}),(0,s.jsx)(n(),{href:c.bw.SECURITY,className:"block px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>h(!1),children:"Security"}),(0,s.jsx)("hr",{className:"my-1"}),(0,s.jsx)("button",{onClick:()=>{r(),h(!1)},className:"w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 transition-colors",children:"Logout"})]})]})})]})})};var d=r(7541),h=r(9317);let x=[{label:"Dashboard",href:c.bw.DASHBOARD,icon:"\uD83D\uDCCA"},{label:"Invoices",href:c.bw.INVOICES,icon:"\uD83D\uDCC4"},{label:"Clients",href:c.bw.CLIENTS,icon:"\uD83D\uDC65"},{label:"Products",href:c.bw.PRODUCTS,icon:"\uD83D\uDCE6"},{label:"Payments",href:c.bw.PAYMENTS,icon:"\uD83D\uDCB3"}],m=()=>{let e=(0,d.usePathname)(),{sidebarOpen:t}=(0,o.j)();return(0,s.jsxs)("aside",{className:(0,h.cn)("fixed left-0 top-16 bottom-0 bg-gray-900 text-white transition-all duration-300 ease-in-out z-30",t?"w-64":"w-20"),children:[(0,s.jsx)("nav",{className:"p-4 space-y-2",children:x.map(r=>{let l=e===r.href||e.startsWith(r.href+"/");return(0,s.jsxs)(n(),{href:r.href,className:(0,h.cn)("flex items-center gap-3 px-4 py-3 rounded-lg transition-colors",l?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),title:t?void 0:r.label,children:[(0,s.jsx)("span",{className:"text-xl flex-shrink-0",children:r.icon}),t&&(0,s.jsx)("span",{className:"text-sm font-medium",children:r.label})]},r.href)})}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 border-t border-gray-700 p-4 space-y-2",children:(0,s.jsxs)(n(),{href:c.bw.SETTINGS,className:(0,h.cn)("flex items-center gap-3 px-4 py-3 rounded-lg transition-colors",e===c.bw.SETTINGS?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),title:t?void 0:"Settings",children:[(0,s.jsx)("span",{className:"text-xl flex-shrink-0",children:"⚙️"}),t&&(0,s.jsx)("span",{className:"text-sm font-medium",children:"Settings"})]})})]})};var g=r(2151);let b=e=>{let{children:t}=e,{isAuthenticated:r,initalized:l}=(0,i.h)(),{sidebarOpen:a}=(0,o.j)();return l?r?(0,s.jsx)(g.tH,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,s.jsx)(u,{}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(m,{}),(0,s.jsx)("main",{className:(0,h.cn)("flex-1 transition-all duration-300 ease-in-out",a?"ml-64":"ml-20"),children:(0,s.jsx)("div",{className:"p-6 min-h-[calc(100vh-64px)]",children:t})})]})]})}):(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:"Please log in to continue."}):(0,s.jsx)(g.kt,{fullScreen:!0})};function f(e){let{children:t}=e;return(0,s.jsx)(b,{children:t})}},2902:(e,t,r)=>{"use strict";function s(){for(var e,t,r=0,s="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=function e(t){var r,s,l="";if("string"==typeof t||"number"==typeof t)l+=t;else if("object"==typeof t)if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(s=e(t[r]))&&(l&&(l+=" "),l+=s)}else for(s in t)t[s]&&(l&&(l+=" "),l+=s);return l}(e))&&(s&&(s+=" "),s+=t);return s}r.d(t,{$:()=>s})},4097:(e,t,r)=>{Promise.resolve().then(r.bind(r,2381))},5214:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(7156),l=r(7248);let a={register:e=>(0,s.bE)(l.Sn.AUTH_REGISTER,e),login:e=>(0,s.bE)(l.Sn.AUTH_LOGIN,e),getCurrentUser:()=>(0,s.Jt)(l.Sn.AUTH_ME),changePassword:e=>(0,s.F6)(l.Sn.AUTH_CHANGE_PASSWORD,e)}},6640:(e,t,r)=>{"use strict";r.d(t,{h:()=>c});var s=r(7620);let l=(0,r(1367).vt)(e=>({user:null,isLoading:!1,isAuthenticated:!1,setUser:t=>e({user:t,isAuthenticated:!!t}),setLoading:t=>e({isLoading:t}),login:t=>e({user:t,isAuthenticated:!0}),logout:()=>e({user:null,isAuthenticated:!1})}));var a=r(5214),n=r(7156),i=r(7248),o=r(796);function c(e){var t;let{user:r,isLoading:c,isAuthenticated:u,logout:d,setUser:h,setLoading:x}=l(),[m,g]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem(i.il);if(e){(0,n.O5)(e);let t=await a.Z.getCurrentUser();h(t)}}catch(e){(0,n.Tp)(),localStorage.removeItem(i.il)}finally{g(!0)}})()},[h]);let b=(0,s.useCallback)(async(t,r)=>{try{x(!0);let e=await a.Z.login({email:t,password:r});localStorage.setItem(i.il,e.accessToken),(0,n.O5)(e.accessToken);let{accessToken:s,...l}=e;return h(l),{success:!0}}catch(t){var s;return null==e||null==(s=e.onAuthError)||s.call(e,t),{success:!1,error:(0,o.u1)(t)}}finally{x(!1)}},[x,h,e]),f=(0,s.useCallback)(()=>{localStorage.removeItem(i.il),(0,n.Tp)(),d()},[d]),v=(0,s.useCallback)(async(t,r,s,l)=>{try{x(!0);let e=await a.Z.register({email:t,password:r,confirmPassword:r,firstName:s,lastName:l});localStorage.setItem(i.il,e.accessToken),(0,n.O5)(e.accessToken);let{accessToken:o,...c}=e;return h(c),{success:!0}}catch(t){var c;return null==e||null==(c=e.onAuthError)||c.call(e,t),{success:!1,error:(0,o.u1)(t)}}finally{x(!1)}},[x,h,e]),p=(0,s.useCallback)(e=>!0,[]),y=(null==r||null==(t=r.subscription)?void 0:t.plan)==="pro";return(0,s.useEffect)(()=>{let t=()=>{var t;f(),null==e||null==(t=e.onAuthError)||t.call(e,Error("Unauthorized"))};return window.addEventListener("auth-error",t),()=>window.removeEventListener("auth-error",t)},[f,e]),{user:r,isLoading:c,isAuthenticated:u,initalized:m,isPro:y,login:b,logout:f,register:v,hasPermission:p}}},7541:(e,t,r)=>{"use strict";var s=r(3041);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})}},e=>{e.O(0,[517,664,982,587,18,358],()=>e(e.s=4097)),_N_E=e.O()}]);