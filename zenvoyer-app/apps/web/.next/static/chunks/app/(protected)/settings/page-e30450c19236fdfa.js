(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[736],{995:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>g});var a=r(4568),t=r(7620),l=r(3631),n=r(6640),o=r(8350),i=r(3046),d=r(2151);let c=()=>{var e,s,r,c;let{user:m}=(0,n.h)(),{addNotification:u}=(0,o.j)(),[h,x]=t.useState(!1),[p,g]=t.useState(!1),{register:b,handleSubmit:w,formState:{errors:y},reset:j}=(0,l.mN)({defaultValues:{firstName:(null==m?void 0:m.firstName)||"",lastName:(null==m?void 0:m.lastName)||"",email:(null==m?void 0:m.email)||"",phoneNumber:(null==m?void 0:m.phoneNumber)||""}}),f=async e=>{try{g(!0),u({type:i._n.SUCCESS,message:"Profile updated successfully!",duration:3e3}),x(!1)}catch(e){u({type:i._n.ERROR,message:(null==e?void 0:e.message)||"Failed to update profile",duration:5e3})}finally{g(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Profile Settings"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Update your personal information"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"w-16 h-16 rounded-full bg-blue-600 text-white flex items-center justify-center text-2xl font-bold",children:[null==m||null==(e=m.firstName)?void 0:e.charAt(0),null==m||null==(s=m.lastName)?void 0:s.charAt(0)]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-semibold text-gray-900",children:[null==m?void 0:m.firstName," ",null==m?void 0:m.lastName]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:null==m?void 0:m.email}),(0,a.jsx)("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium mt-1",children:"Change Avatar"})]})]}),(0,a.jsxs)("form",{onSubmit:w(f),className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(d.zB,{...b("firstName"),label:"First Name",placeholder:"John",error:y.firstName,disabled:!h}),(0,a.jsx)(d.zB,{...b("lastName"),label:"Last Name",placeholder:"Doe",error:y.lastName,disabled:!h})]}),(0,a.jsx)(d.zB,{...b("email"),type:"email",label:"Email Address",placeholder:"you@example.com",error:y.email,disabled:!0}),(0,a.jsx)(d.zB,{...b("phoneNumber"),type:"tel",label:"Phone Number",placeholder:"+1234567890",error:y.phoneNumber,disabled:!h}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Subscription"}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-blue-900",children:["Plan: ",(0,a.jsx)("span",{className:"capitalize",children:null==m||null==(r=m.subscription)?void 0:r.plan})]}),(0,a.jsxs)("p",{className:"text-sm text-blue-700 mt-1",children:["Status: ",(0,a.jsx)("span",{className:"capitalize",children:null==m||null==(c=m.subscription)?void 0:c.status})]})]})]}),(0,a.jsx)("div",{className:"flex gap-2 justify-end border-t border-gray-200 pt-4",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.$n,{type:"button",variant:"secondary",onClick:()=>{x(!1),j()},disabled:p,children:"Cancel"}),(0,a.jsx)(d.$n,{type:"submit",loading:p,disabled:p,children:"Save Changes"})]}):(0,a.jsx)(d.$n,{onClick:()=>x(!0),variant:"primary",children:"Edit Profile"})})]})]})]})};var m=r(2935),u=r(1157),h=r(8258),x=r(5214);let p=()=>{let{addNotification:e}=(0,o.j)(),s=(0,h.L2)(x.Z.changePassword),{register:r,handleSubmit:t,formState:{errors:n},reset:c}=(0,l.mN)({resolver:(0,m.u)(u.nM),defaultValues:{oldPassword:"",newPassword:"",confirmPassword:""}}),p=async r=>{s.mutate(r,{onSuccess:()=>{e({type:i._n.SUCCESS,message:"Password changed successfully!",duration:3e3}),c()},onError:s=>{e({type:i._n.ERROR,message:(null==s?void 0:s.message)||"Failed to change password",duration:5e3})}})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Security Settings"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your account security and passwords"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Change Password"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Update your password regularly to keep your account secure"})]}),(0,a.jsxs)("form",{onSubmit:t(p),className:"space-y-4 max-w-md",children:[(0,a.jsx)(d.zB,{...r("oldPassword"),type:"password",label:"Current Password",placeholder:"••••••••",error:n.oldPassword,required:!0}),(0,a.jsx)(d.zB,{...r("newPassword"),type:"password",label:"New Password",placeholder:"••••••••",error:n.newPassword,helperText:"At least 8 characters with uppercase, lowercase, and numbers",required:!0}),(0,a.jsx)(d.zB,{...r("confirmPassword"),type:"password",label:"Confirm New Password",placeholder:"••••••••",error:n.confirmPassword,required:!0}),(0,a.jsx)(d.$n,{type:"submit",loading:s.isPending,disabled:s.isPending,children:"Update Password"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Active Sessions"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Manage your login sessions across devices"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Current Session"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"\uD83D\uDCBB Chrome on MacOS"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Last active: just now"})]}),(0,a.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full",children:"ACTIVE"})]})}),(0,a.jsx)(d.$n,{variant:"secondary",className:"w-full",children:"Logout All Other Sessions"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-6 border-l-4 border-yellow-500",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Two-Factor Authentication"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Add an extra layer of security to your account"})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,a.jsxs)("p",{className:"text-sm text-yellow-800",children:["Two-factor authentication is currently ",(0,a.jsx)("strong",{children:"disabled"})]}),(0,a.jsx)("p",{className:"text-xs text-yellow-700 mt-1",children:"Enable it to require a verification code in addition to your password when logging in"})]}),(0,a.jsx)(d.$n,{variant:"secondary",children:"Enable Two-Factor Authentication"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-6 border-l-4 border-red-500",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Danger Zone"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Irreversible actions that cannot be undone"})]}),(0,a.jsx)(d.$n,{variant:"danger",fullWidth:!0,children:"Delete Account"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Deleting your account will permanently remove all data associated with it"})]})]})};function g(){let[e,s]=(0,t.useState)("profile");return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"})}),(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("div",{className:"flex gap-8",children:[{id:"profile",label:"Profile",icon:"\uD83D\uDC64"},{id:"security",label:"Security",icon:"\uD83D\uDD12"}].map(r=>(0,a.jsxs)("button",{onClick:()=>s(r.id),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat(e===r.id?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"),children:[(0,a.jsx)("span",{className:"mr-2",children:r.icon}),r.label]},r.id))})}),(0,a.jsxs)("div",{children:["profile"===e&&(0,a.jsx)(c,{}),"security"===e&&(0,a.jsx)(p,{})]})]})}},1157:(e,s,r)=>{"use strict";r.d(s,{X5:()=>n,nM:()=>i,zK:()=>o});var a=r(3916);let t=a.Yj().email("Invalid email address").trim().toLowerCase(),l=a.Yj().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number"),n=a.Ik({email:t,password:a.Yj().min(1,"Password is required")}),o=a.Ik({email:t,firstName:a.Yj().min(2,"First name must be at least 2 characters").max(50,"First name must be at most 50 characters").trim(),lastName:a.Yj().min(2,"Last name must be at least 2 characters").max(50,"Last name must be at most 50 characters").trim(),phoneNumber:a.Yj().regex(/^\+?[1-9]\d{1,14}$/,"Invalid phone number format").optional().or(a.eu("")),password:l,confirmPassword:a.Yj()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),i=a.Ik({oldPassword:a.Yj().min(1,"Old password is required"),newPassword:l,confirmPassword:a.Yj()}).refine(e=>e.newPassword===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}).refine(e=>e.oldPassword!==e.newPassword,{message:"New password must be different from old password",path:["newPassword"]})},5214:(e,s,r)=>{"use strict";r.d(s,{Z:()=>l});var a=r(7156),t=r(7248);let l={register:e=>(0,a.bE)(t.Sn.AUTH_REGISTER,e),login:e=>(0,a.bE)(t.Sn.AUTH_LOGIN,e),getCurrentUser:()=>(0,a.Jt)(t.Sn.AUTH_ME),changePassword:e=>(0,a.F6)(t.Sn.AUTH_CHANGE_PASSWORD,e)}},6640:(e,s,r)=>{"use strict";r.d(s,{h:()=>d});var a=r(7620);let t=(0,r(1367).vt)(e=>({user:null,isLoading:!1,isAuthenticated:!1,setUser:s=>e({user:s,isAuthenticated:!!s}),setLoading:s=>e({isLoading:s}),login:s=>e({user:s,isAuthenticated:!0}),logout:()=>e({user:null,isAuthenticated:!1})}));var l=r(5214),n=r(7156),o=r(7248),i=r(796);function d(e){var s;let{user:r,isLoading:d,isAuthenticated:c,logout:m,setUser:u,setLoading:h}=t(),[x,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem(o.il);if(e){(0,n.O5)(e);let s=await l.Z.getCurrentUser();u(s)}}catch(e){(0,n.Tp)(),localStorage.removeItem(o.il)}finally{p(!0)}})()},[u]);let g=(0,a.useCallback)(async(s,r)=>{try{h(!0);let e=await l.Z.login({email:s,password:r});localStorage.setItem(o.il,e.accessToken),(0,n.O5)(e.accessToken);let{accessToken:a,...t}=e;return u(t),{success:!0}}catch(s){var a;return null==e||null==(a=e.onAuthError)||a.call(e,s),{success:!1,error:(0,i.u1)(s)}}finally{h(!1)}},[h,u,e]),b=(0,a.useCallback)(()=>{localStorage.removeItem(o.il),(0,n.Tp)(),m()},[m]),w=(0,a.useCallback)(async(s,r,a,t)=>{try{h(!0);let e=await l.Z.register({email:s,password:r,confirmPassword:r,firstName:a,lastName:t});localStorage.setItem(o.il,e.accessToken),(0,n.O5)(e.accessToken);let{accessToken:i,...d}=e;return u(d),{success:!0}}catch(s){var d;return null==e||null==(d=e.onAuthError)||d.call(e,s),{success:!1,error:(0,i.u1)(s)}}finally{h(!1)}},[h,u,e]),y=(0,a.useCallback)(e=>!0,[]),j=(null==r||null==(s=r.subscription)?void 0:s.plan)==="pro";return(0,a.useEffect)(()=>{let s=()=>{var s;b(),null==e||null==(s=e.onAuthError)||s.call(e,Error("Unauthorized"))};return window.addEventListener("auth-error",s),()=>window.removeEventListener("auth-error",s)},[b,e]),{user:r,isLoading:d,isAuthenticated:c,initalized:x,isPro:j,login:g,logout:b,register:w,hasPermission:y}}},7558:(e,s,r)=>{Promise.resolve().then(r.bind(r,995))},8258:(e,s,r)=>{"use strict";r.d(s,{L2:()=>i,gf:()=>o});var a=r(2995),t=r(1562),l=r(6530),n=r(796);function o(e,s,r){let t=(0,a.I)({queryKey:e,queryFn:s,retry:(e,s)=>(0,l.d7)(s)?![400,401,403,404,409,422].includes(s.statusCode)&&e<3:e<3,...r});return{...t,error:t.error,errorMessage:t.error?(0,n.u1)(t.error):null}}function i(e,s){let r=(0,t.n)({mutationFn:e,...s});return{...r,error:r.error,errorMessage:r.error?(0,n.u1)(r.error):null}}}},e=>{e.O(0,[517,293,662,242,982,587,18,358],()=>e(e.s=7558)),_N_E=e.O()}]);