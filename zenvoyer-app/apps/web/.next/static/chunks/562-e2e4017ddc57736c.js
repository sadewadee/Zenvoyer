"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[562],{5375:(e,t,r)=>{r.d(t,{i:()=>s});var a=r(7156),n=r(7248);let s={getClients:()=>(0,a.Jt)(n.Sn.CLIENTS),getClient:e=>(0,a.Jt)(n.Sn.CLIENT_BY_ID(e)),createClient:e=>(0,a.bE)(n.Sn.CLIENTS,e),updateClient:(e,t)=>(0,a.yJ)(n.Sn.CLIENT_BY_ID(e),t),deleteClient:e=>(0,a.yH)(n.Sn.CLIENT_BY_ID(e)),importClients:e=>(0,a.bE)(n.Sn.CLIENTS_IMPORT,e)}},7541:(e,t,r)=>{var a=r(3041);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},8258:(e,t,r)=>{r.d(t,{L2:()=>d,gf:()=>i});var a=r(2995),n=r(1562),s=r(6530),l=r(796);function i(e,t,r){let n=(0,a.I)({queryKey:e,queryFn:t,retry:(e,t)=>(0,s.d7)(t)?![400,401,403,404,409,422].includes(t.statusCode)&&e<3:e<3,...r});return{...n,error:n.error,errorMessage:n.error?(0,l.u1)(n.error):null}}function d(e,t){let r=(0,n.n)({mutationFn:e,...t});return{...r,error:r.error,errorMessage:r.error?(0,l.u1)(r.error):null}}},8562:(e,t,r)=>{r.d(t,{M:()=>y,c:()=>x});var a=r(4568),n=r(7620),s=r(9664),l=r.n(s),i=r(8258),d=r(5375),o=r(8350),c=r(3046),u=r(7248),m=r(2151);let x=()=>{let[e,t]=(0,n.useState)({pageIndex:0,pageSize:10}),[r,s]=(0,n.useState)(null),{addNotification:x}=(0,o.j)(),{data:h,isLoading:b,error:p,errorMessage:g,refetch:j}=(0,i.gf)(["clients",e],()=>d.i.getClients()),C=(0,i.L2)(d.i.deleteClient),y=[{key:"name",label:"Name",render:(e,t)=>(0,a.jsx)(l(),{href:u.bw.CLIENT_EDIT.replace(":id",t.id),className:"text-blue-600 hover:text-blue-700 font-medium",children:e})},{key:"email",label:"Email"},{key:"phoneNumber",label:"Phone",render:e=>e||"-"},{key:"currency",label:"Currency",render:e=>e||"USD"},{key:"id",label:"Actions",render:(e,t)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l(),{href:u.bw.CLIENT_EDIT.replace(":id",t.id),children:(0,a.jsx)(m.$n,{variant:"secondary",size:"sm",children:"Edit"})}),(0,a.jsx)(m.$n,{variant:"danger",size:"sm",onClick:()=>s(t.id),children:"Delete"})]})}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Clients"}),(0,a.jsx)(l(),{href:u.bw.CLIENT_CREATE,children:(0,a.jsx)(m.$n,{children:"+ New Client"})})]}),b?(0,a.jsx)(m.kt,{text:"Loading clients..."}):p?(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:g}):(0,a.jsx)(m.bQ,{data:h||[],columns:y,pagination:e,onPaginationChange:t}),(0,a.jsx)(m.aF,{isOpen:!!r,onClose:()=>s(null),title:"Delete Client",size:"sm",footer:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.$n,{variant:"secondary",onClick:()=>s(null),disabled:C.isPending,children:"Cancel"}),(0,a.jsx)(m.$n,{variant:"danger",loading:C.isPending,disabled:C.isPending,onClick:()=>r&&void C.mutate(r,{onSuccess:()=>{x({type:c._n.SUCCESS,message:"Client deleted!",duration:3e3}),s(null),j()},onError:e=>{x({type:c._n.ERROR,message:(null==e?void 0:e.message)||"Failed to delete client",duration:5e3})}}),children:"Delete"})]}),children:(0,a.jsx)("p",{className:"text-gray-700",children:"Are you sure you want to delete this client? This action cannot be undone."})})]})};var h=r(3631),b=r(2935),p=r(7541),g=r(3916);let j=g.Yj().email("Invalid email address").trim().toLowerCase(),C=g.Ik({name:g.Yj().min(2,"Client name must be at least 2 characters").max(100,"Client name must be at most 100 characters").trim(),email:j,phoneNumber:g.Yj().regex(/^\+?[1-9]\d{1,14}$/,"Invalid phone number format").optional().or(g.eu("")),address:g.Yj().max(300,"Address must be at most 300 characters").optional().or(g.eu("")),taxId:g.Yj().max(50,"Tax ID must be at most 50 characters").optional().or(g.eu("")),currency:g.fc(c.Sj).optional(),tags:g.YO(g.Yj().max(50,"Tag must be at most 50 characters")).optional().default([]),notes:g.Yj().max(500,"Notes must be at most 500 characters").optional().or(g.eu(""))});C.partial(),g.Ik({clients:g.YO(C).min(1,"At least one client is required").max(1e3,"Maximum 1000 clients can be imported at once")});let y=e=>{let{clientId:t}=e,r=(0,p.useRouter)(),{addNotification:s}=(0,o.j)(),{data:l}=(0,i.gf)(["client",t],()=>d.i.getClient(t),{enabled:!!t}),x=(0,i.L2)(d.i.createClient),g=(0,i.L2)(e=>d.i.updateClient(t,e)),{register:j,handleSubmit:y,formState:{errors:N},reset:f}=(0,h.mN)({resolver:(0,b.u)(C),defaultValues:{name:"",email:"",phoneNumber:"",address:"",taxId:"",currency:c.Sj.USD,tags:[],notes:""}});(0,n.useEffect)(()=>{l&&f(l)},[l,f]);let v=async e=>{try{(t?g.mutate:x.mutate)(e,{onSuccess:()=>{s({type:c._n.SUCCESS,message:t?"Client updated!":"Client created!",duration:3e3}),r.push(u.bw.CLIENTS)},onError:e=>{s({type:c._n.ERROR,message:(null==e?void 0:e.message)||"Failed to save client",duration:5e3})}})}catch(e){s({type:c._n.ERROR,message:"An unexpected error occurred",duration:5e3})}},S=x.isPending||g.isPending;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:t?"Edit Client":"Create Client"})}),(0,a.jsxs)("form",{onSubmit:y(v),className:"bg-white rounded-lg shadow p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Client Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(m.zB,{...j("name"),label:"Company Name",placeholder:"Acme Corporation",error:N.name,required:!0}),(0,a.jsx)(m.zB,{...j("email"),type:"email",label:"Email",placeholder:"contact@acme.com",error:N.email,required:!0}),(0,a.jsx)(m.zB,{...j("phoneNumber"),type:"tel",label:"Phone Number",placeholder:"+1234567890",error:N.phoneNumber}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),(0,a.jsxs)("select",{...j("currency"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Select currency"}),Object.values(c.Sj).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})]}),(0,a.jsx)(m.zB,{...j("address"),label:"Address",placeholder:"123 Main Street, City, State 12345",error:N.address}),(0,a.jsx)(m.zB,{...j("taxId"),label:"Tax ID",placeholder:"12-3456789",error:N.taxId}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,a.jsx)("textarea",{...j("notes"),placeholder:"Add any notes about this client...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),N.notes&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:N.notes.message})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end border-t border-gray-200 pt-6",children:[(0,a.jsx)(m.$n,{type:"button",variant:"secondary",onClick:()=>r.back(),disabled:S,children:"Cancel"}),(0,a.jsxs)(m.$n,{type:"submit",loading:S,disabled:S,children:[t?"Update":"Create"," Client"]})]})]})]})}}}]);