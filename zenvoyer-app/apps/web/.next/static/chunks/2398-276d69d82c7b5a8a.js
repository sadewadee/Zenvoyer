"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2398],{2398:(e,t,r)=>{r.d(t,{i:()=>N,E:()=>h});var a=r(4568),n=r(7620),s=r(9664),i=r.n(s),o=r(8258),d=r(7156),l=r(7248);let c={getProducts:()=>(0,d.Jt)(l.Sn.PRODUCTS),getProduct:e=>(0,d.Jt)(l.Sn.PRODUCT_BY_ID(e)),createProduct:e=>(0,d.bE)(l.Sn.PRODUCTS,e),updateProduct:(e,t)=>(0,d.yJ)(l.Sn.PRODUCT_BY_ID(e),t),deleteProduct:e=>(0,d.yH)(l.Sn.PRODUCT_BY_ID(e))};var u=r(8350),m=r(3046),g=r(7042),p=r(2151);let h=()=>{let[e,t]=(0,n.useState)({pageIndex:0,pageSize:10}),[r,s]=(0,n.useState)(null),{addNotification:d}=(0,u.j)(),{data:l,isLoading:h,error:x,errorMessage:f,refetch:b}=(0,o.gf)(["products",e],()=>c.getProducts()),v=(0,o.L2)(c.deleteProduct),y=[{key:"name",label:"Name",render:(e,t)=>(0,a.jsx)(i(),{href:"/products/".concat(t.id,"/edit"),className:"text-blue-600 hover:text-blue-700 font-medium",children:e})},{key:"description",label:"Description",render:e=>e||"-"},{key:"defaultPrice",label:"Price",render:e=>(0,g.vv)(e)},{key:"category",label:"Category",render:e=>e||"-"},{key:"sku",label:"SKU",render:e=>e||"-"},{key:"id",label:"Actions",render:(e,t)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i(),{href:"/products/".concat(t.id,"/edit"),children:(0,a.jsx)(p.$n,{variant:"secondary",size:"sm",children:"Edit"})}),(0,a.jsx)(p.$n,{variant:"danger",size:"sm",onClick:()=>s(t.id),children:"Delete"})]})}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Products"}),(0,a.jsx)(i(),{href:"/products/create",children:(0,a.jsx)(p.$n,{children:"+ New Product"})})]}),h?(0,a.jsx)(p.kt,{text:"Loading products..."}):x?(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:f}):(0,a.jsx)(p.bQ,{data:l||[],columns:y,pagination:e,onPaginationChange:t}),(0,a.jsx)(p.aF,{isOpen:!!r,onClose:()=>s(null),title:"Delete Product",size:"sm",footer:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.$n,{variant:"secondary",onClick:()=>s(null),disabled:v.isPending,children:"Cancel"}),(0,a.jsx)(p.$n,{variant:"danger",loading:v.isPending,disabled:v.isPending,onClick:()=>r&&void v.mutate(r,{onSuccess:()=>{d({type:m._n.SUCCESS,message:"Product deleted!",duration:3e3}),s(null),b()},onError:e=>{d({type:m._n.ERROR,message:(null==e?void 0:e.message)||"Failed to delete product",duration:5e3})}}),children:"Delete"})]}),children:(0,a.jsx)("p",{className:"text-gray-700",children:"Are you sure you want to delete this product? This action cannot be undone."})})]})};var x=r(3631),f=r(2935),b=r(7541),v=r(3916);let y=v.Ik({name:v.Yj().min(2,"Product name must be at least 2 characters").max(100,"Product name must be at most 100 characters").trim(),description:v.Yj().max(1e3,"Description must be at most 1000 characters").optional().or(v.eu("")),defaultPrice:v.ai().min(0,"Price cannot be negative").max(0x3b9ac9ff,"Price is too large"),sku:v.Yj().max(50,"SKU must be at most 50 characters").optional().or(v.eu("")),category:v.Yj().max(50,"Category must be at most 50 characters").optional().or(v.eu("")),notes:v.Yj().max(500,"Notes must be at most 500 characters").optional().or(v.eu(""))});y.partial();let N=e=>{let{productId:t}=e,r=(0,b.useRouter)(),{addNotification:s}=(0,u.j)(),{data:i}=(0,o.gf)(["product",t],()=>c.getProduct(t),{enabled:!!t}),d=(0,o.L2)(c.createProduct),l=(0,o.L2)(e=>c.updateProduct(t,e)),{register:g,handleSubmit:h,formState:{errors:v},reset:N}=(0,x.mN)({resolver:(0,f.u)(y),defaultValues:{name:"",description:"",defaultPrice:0,sku:"",category:"",notes:""}});(0,n.useEffect)(()=>{i&&N(i)},[i,N]);let j=async e=>{try{(t?l.mutate:d.mutate)(e,{onSuccess:()=>{s({type:m._n.SUCCESS,message:t?"Product updated!":"Product created!",duration:3e3}),r.push("/products")},onError:e=>{s({type:m._n.ERROR,message:(null==e?void 0:e.message)||"Failed to save product",duration:5e3})}})}catch(e){s({type:m._n.ERROR,message:"An unexpected error occurred",duration:5e3})}},D=d.isPending||l.isPending;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:t?"Edit Product":"Create Product"})}),(0,a.jsxs)("form",{onSubmit:h(j),className:"bg-white rounded-lg shadow p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Product Information"}),(0,a.jsx)(p.zB,{...g("name"),label:"Product Name",placeholder:"e.g., Web Development Services",error:v.name,required:!0}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsx)("textarea",{...g("description"),placeholder:"Describe your product or service...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),v.description&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:v.description.message})]}),(0,a.jsx)(p.zB,{...g("defaultPrice",{valueAsNumber:!0}),type:"number",step:"0.01",label:"Default Price",placeholder:"0.00",error:v.defaultPrice,required:!0}),(0,a.jsx)(p.zB,{...g("sku"),label:"SKU (Stock Keeping Unit)",placeholder:"e.g., WEB-001",error:v.sku}),(0,a.jsx)(p.zB,{...g("category"),label:"Category",placeholder:"e.g., Services",error:v.category}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,a.jsx)("textarea",{...g("notes"),placeholder:"Add any additional notes...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),v.notes&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:v.notes.message})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end border-t border-gray-200 pt-6",children:[(0,a.jsx)(p.$n,{type:"button",variant:"secondary",onClick:()=>r.back(),disabled:D,children:"Cancel"}),(0,a.jsxs)(p.$n,{type:"submit",loading:D,disabled:D,children:[t?"Update":"Create"," Product"]})]})]})]})}},7042:(e,t,r)=>{r.d(t,{vv:()=>h,Yq:()=>f,ZV:()=>x});var a=r(2500),n=r(4363),s={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},i=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,o=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d=/^([+-])(\d{2})(?::?(\d{2}))?$/;function l(e){return e?parseInt(e):1}function c(e){return e&&parseFloat(e.replace(",","."))||0}var u=[31,null,31,30,31,30,31,31,30,31,30,31];function m(e){return e%400==0||e%4==0&&e%100!=0}var g=r(8578),p=(r(8727),r(7248));function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US";return new Intl.NumberFormat(r,{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:2}).format(e)}function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US";return new Intl.NumberFormat(r,{minimumFractionDigits:t,maximumFractionDigits:t}).format(e)}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.Kn.DISPLAY;try{let r="string"==typeof e?function(e,t){(0,a.A)(1,arguments);var r,g,p,h=(0,n.A)(null!=(r=null==t?void 0:t.additionalDigits)?r:2);if(2!==h&&1!==h&&0!==h)throw RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var x=function(e){var t,r={},a=e.split(s.dateTimeDelimiter);if(a.length>2)return r;if(/:/.test(a[0])?t=a[0]:(r.date=a[0],t=a[1],s.timeZoneDelimiter.test(r.date)&&(r.date=e.split(s.timeZoneDelimiter)[0],t=e.substr(r.date.length,e.length))),t){var n=s.timezone.exec(t);n?(r.time=t.replace(n[1],""),r.timezone=n[1]):r.time=t}return r}(e);if(x.date){var f=function(e,t){var r=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(r);if(!a)return{year:NaN,restDateString:""};var n=a[1]?parseInt(a[1]):null,s=a[2]?parseInt(a[2]):null;return{year:null===s?n:100*s,restDateString:e.slice((a[1]||a[2]).length)}}(x.date,h);g=function(e,t){if(null===t)return new Date(NaN);var r,a,n,s,o,d,c,g,p,h,x,f,b=e.match(i);if(!b)return new Date(NaN);var v=!!b[4],y=l(b[1]),N=l(b[2])-1,j=l(b[3]),D=l(b[4]),P=l(b[5])-1;if(v){return(r=D,a=P,r>=1&&r<=53&&a>=0&&a<=6)?(n=t,s=D,o=P,(d=new Date(0)).setUTCFullYear(n,0,4),c=d.getUTCDay()||7,d.setUTCDate(d.getUTCDate()+((s-1)*7+o+1-c)),d):new Date(NaN)}var S=new Date(0);return(g=t,p=N,h=j,p>=0&&p<=11&&h>=1&&h<=(u[p]||(m(g)?29:28))&&(x=t,(f=y)>=1&&f<=(m(x)?366:365)))?(S.setUTCFullYear(t,N,Math.max(y,j)),S):new Date(NaN)}(f.restDateString,f.year)}if(!g||isNaN(g.getTime()))return new Date(NaN);var b=g.getTime(),v=0;if(x.time&&isNaN(v=function(e){var t,r,a,n=e.match(o);if(!n)return NaN;var s=c(n[1]),i=c(n[2]),d=c(n[3]);return(t=s,r=i,a=d,24===t?0===r&&0===a:a>=0&&a<60&&r>=0&&r<60&&t>=0&&t<25)?36e5*s+6e4*i+1e3*d:NaN}(x.time)))return new Date(NaN);if(x.timezone){if(isNaN(p=function(e){if("Z"===e)return 0;var t,r=e.match(d);if(!r)return 0;var a="+"===r[1]?-1:1,n=parseInt(r[2]),s=r[3]&&parseInt(r[3])||0;return(t=s)>=0&&t<=59?a*(36e5*n+6e4*s):NaN}(x.timezone)))return new Date(NaN)}else{var y=new Date(b+v),N=new Date(0);return N.setFullYear(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate()),N.setHours(y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds()),N}return new Date(b+v+p)}(e):e;return(0,g.A)(r,t)}catch(e){return"Invalid date"}}},7541:(e,t,r)=>{var a=r(3041);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},8258:(e,t,r)=>{r.d(t,{L2:()=>d,gf:()=>o});var a=r(2995),n=r(1562),s=r(6530),i=r(796);function o(e,t,r){let n=(0,a.I)({queryKey:e,queryFn:t,retry:(e,t)=>(0,s.d7)(t)?![400,401,403,404,409,422].includes(t.statusCode)&&e<3:e<3,...r});return{...n,error:n.error,errorMessage:n.error?(0,i.u1)(n.error):null}}function d(e,t){let r=(0,n.n)({mutationFn:e,...t});return{...r,error:r.error,errorMessage:r.error?(0,i.u1)(r.error):null}}}}]);