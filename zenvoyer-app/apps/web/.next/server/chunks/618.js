exports.id=618,exports.ids=[618],exports.modules={33703:(a,b,c)=>{Promise.resolve().then(c.bind(c,99593))},73871:(a,b,c)=>{Promise.resolve().then(c.bind(c,74976))},74976:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(25459).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/sadewadee/Downloads/Plugin Pro/Zenvoyer/zenvoyer-app/apps/web/src/app/(protected)/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sadewadee/Downloads/Plugin Pro/Zenvoyer/zenvoyer-app/apps/web/src/app/(protected)/layout.tsx","default")},92526:(a,b,c)=>{"use strict";c.d(b,{L2:()=>i,gf:()=>h});var d=c(14380),e=c(86539),f=c(27108),g=c(81962);function h(a,b,c){let e=(0,d.I)({queryKey:a,queryFn:b,retry:(a,b)=>(0,f.d7)(b)?![400,401,403,404,409,422].includes(b.statusCode)&&a<3:a<3,...c});return{...e,error:e.error,errorMessage:e.error?(0,g.u1)(e.error):null}}function i(a,b){let c=(0,e.n)({mutationFn:a,...b});return{...c,error:c.error,errorMessage:c.error?(0,g.u1)(c.error):null}}},92685:(a,b,c)=>{"use strict";c.d(b,{i:()=>f});var d=c(44224),e=c(79818);let f={getClients:()=>(0,d.Jt)(e.Sn.CLIENTS),getClient:a=>(0,d.Jt)(e.Sn.CLIENT_BY_ID(a)),createClient:a=>(0,d.bE)(e.Sn.CLIENTS,a),updateClient:(a,b)=>(0,d.yJ)(e.Sn.CLIENT_BY_ID(a),b),deleteClient:a=>(0,d.yH)(e.Sn.CLIENT_BY_ID(a)),importClients:a=>(0,d.bE)(e.Sn.CLIENTS_IMPORT,a)}},97150:(a,b,c)=>{"use strict";c.d(b,{F_:()=>A,i$:()=>x,mc:()=>o});var d=c(78157),e=c(31768),f=c(94496),g=c.n(f),h=c(49252),i=c(92526),j=c(44224),k=c(79818);let l={getInvoices:a=>{let b=new URLSearchParams;a?.limit&&b.append("limit",a.limit.toString()),a?.offset&&b.append("offset",a.offset.toString()),a?.status&&b.append("status",a.status),a?.clientId&&b.append("clientId",a.clientId),a?.dateFrom&&b.append("dateFrom",a.dateFrom),a?.dateTo&&b.append("dateTo",a.dateTo);let c=b.toString()?`${k.Sn.INVOICES}?${b}`:k.Sn.INVOICES;return(0,j.Jt)(c)},getInvoice:a=>(0,j.Jt)(k.Sn.INVOICE_BY_ID(a)),createInvoice:a=>(0,j.bE)(k.Sn.INVOICES,a),updateInvoice:(a,b)=>(0,j.yJ)(k.Sn.INVOICE_BY_ID(a),b),sendInvoice:a=>(0,j.bE)(k.Sn.INVOICE_SEND(a)),recordPayment:(a,b)=>(0,j.bE)(k.Sn.INVOICE_PAYMENTS(a),b),generateShareLink:(a,b)=>(0,j.bE)(k.Sn.INVOICE_SHARE(a),{expiresInDays:b})};var m=c(15188),n=c(90200);let o=()=>{let[a,b]=(0,e.useState)({pageIndex:0,pageSize:10}),[c,f]=(0,e.useState)({}),{data:j,isLoading:o,error:p,errorMessage:q}=(0,i.gf)(["invoices",a,c],()=>l.getInvoices({limit:a.pageSize,offset:a.pageIndex*a.pageSize,status:c.status}),{staleTime:3e5}),r=[{key:"invoiceNumber",label:"Invoice #",width:"w-24",render:(a,b)=>(0,d.jsx)(g(),{href:k.bw.INVOICE_VIEW.replace(":id",b.id),className:"text-blue-600 hover:text-blue-700 font-medium",children:a})},{key:"client",label:"Client",render:(a,b)=>(0,d.jsx)("span",{children:b.client?.name||"N/A"})},{key:"grandTotal",label:"Amount",render:(a,b)=>(0,d.jsxs)("span",{className:"font-medium",children:[b.currency," ",a.toLocaleString()]})},{key:"status",label:"Status",render:a=>(0,d.jsx)(n.Wh,{status:a})},{key:"dueDate",label:"Due Date",render:a=>(0,d.jsx)("span",{className:"text-sm text-gray-600",children:(0,h.A)(new Date(a),{addSuffix:!0})})},{key:"id",label:"Actions",render:(a,b)=>(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(g(),{href:k.bw.INVOICE_VIEW.replace(":id",b.id),children:(0,d.jsx)(n.$n,{variant:"secondary",size:"sm",children:"View"})}),b.status===m.Sx.DRAFT&&(0,d.jsx)(g(),{href:k.bw.INVOICE_EDIT.replace(":id",b.id),children:(0,d.jsx)(n.$n,{variant:"secondary",size:"sm",children:"Edit"})})]})}];return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Invoices"}),(0,d.jsx)(g(),{href:k.bw.INVOICE_CREATE,children:(0,d.jsx)(n.$n,{children:"+ New Invoice"})})]}),(0,d.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,d.jsx)("button",{onClick:()=>f({}),className:`px-4 py-2 rounded-lg transition-colors ${!c.status?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"All"}),Object.values(m.Sx).map(a=>(0,d.jsx)("button",{onClick:()=>f({status:a}),className:`px-4 py-2 rounded-lg transition-colors capitalize ${c.status===a?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:a},a))]}),o?(0,d.jsx)(n.kt,{text:"Loading invoices..."}):p?(0,d.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:q}):(0,d.jsx)(n.bQ,{data:j||[],columns:r,pagination:a,onPaginationChange:b})]})};var p=c(6023),q=c(34224),r=c(71159),s=c(85717);let t=s.Ik({productId:s.Yj().uuid().optional(),description:s.Yj().min(1,"Product description is required").max(500,"Description must be at most 500 characters"),quantity:s.ai().min(.01,"Quantity must be greater than 0").max(999999,"Quantity is too large"),unitPrice:s.ai().min(0,"Unit price cannot be negative").max(0x3b9ac9ff,"Unit price is too large"),discount:s.ai().min(0,"Discount cannot be negative").max(999999,"Discount is too large").optional().default(0),tax:s.ai().min(0,"Tax cannot be negative").max(999999,"Tax is too large").optional().default(0)}),u=s.Ik({clientId:s.Yj().uuid("Please select a valid client"),invoiceDate:s.au.date().refine(a=>a<=new Date,{message:"Invoice date cannot be in the future"}),dueDate:s.au.date(),currency:s.fc(m.Sj).default(m.Sj.USD),taxRate:s.ai().min(0,"Tax rate cannot be negative").max(100,"Tax rate cannot exceed 100%").optional().default(0),discountRate:s.ai().min(0,"Discount rate cannot be negative").max(100,"Discount rate cannot exceed 100%").optional().default(0),notes:s.Yj().max(1e3,"Notes must be at most 1000 characters").optional().or(s.eu("")),items:s.YO(t).min(1,"Add at least one invoice item")}).refine(a=>a.dueDate>=a.invoiceDate,{message:"Due date must be on or after invoice date",path:["dueDate"]});s.Ik({clientId:s.Yj().uuid("Please select a valid client"),invoiceDate:s.au.date().refine(a=>a<=new Date,{message:"Invoice date cannot be in the future"}),dueDate:s.au.date(),currency:s.fc(m.Sj).default(m.Sj.USD),taxRate:s.ai().min(0,"Tax rate cannot be negative").max(100,"Tax rate cannot exceed 100%").optional().default(0),discountRate:s.ai().min(0,"Discount rate cannot be negative").max(100,"Discount rate cannot exceed 100%").optional().default(0),notes:s.Yj().max(1e3,"Notes must be at most 1000 characters").optional().or(s.eu("")),items:s.YO(t).min(1,"Add at least one invoice item")}).partial(),s.Ik({amount:s.ai().min(.01,"Amount must be greater than 0").max(0x3b9ac9ff,"Amount is too large"),paymentMethod:s.fc(m.g5),transactionId:s.Yj().max(100,"Transaction ID is too long").optional().or(s.eu("")),notes:s.Yj().max(500,"Notes must be at most 500 characters").optional().or(s.eu(""))}),s.Ik({expiresInDays:s.ai().min(1,"Expiration must be at least 1 day").max(365,"Expiration cannot exceed 365 days").optional()});var v=c(92685),w=c(34514);let x=({invoiceId:a})=>{let b=(0,r.useRouter)(),{addNotification:c}=(0,w.j)(),{data:f}=(0,i.gf)(["clients"],()=>v.i.getClients(),{staleTime:6e5}),{data:g}=(0,i.gf)(["invoice",a],()=>l.getInvoice(a),{enabled:!!a}),h=(0,i.L2)(l.createInvoice),j=(0,i.L2)(b=>l.updateInvoice(a,b)),o=(0,p.mN)({resolver:(0,q.u)(u),defaultValues:{clientId:"",invoiceDate:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],currency:k.b6.CURRENCY,taxRate:k.b6.TAX_RATE,discountRate:k.b6.DISCOUNT_RATE,items:[{description:"",quantity:1,unitPrice:0,discount:0,tax:0}]}}),{register:s,handleSubmit:t,control:x,formState:{errors:y},watch:z}=o,{fields:A,append:B,remove:C}=(0,p.jz)({control:x,name:"items"}),D=function(a){return(0,e.useMemo)(()=>(function(a){let b=a.reduce((a,b)=>a+b.quantity*b.unitPrice,0),c=a.reduce((a,b)=>a+(b.discount||0),0),d=a.reduce((a,b)=>a+(b.tax||0),0);return{subtotal:b,totalDiscount:c,totalTax:d,grandTotal:Math.max(0,b-c+d)}})(a),[a])}(z("items").map(a=>({quantity:a.quantity||0,unitPrice:a.unitPrice||0,discount:a.discount||0,tax:a.tax||0})));(0,e.useEffect)(()=>{g&&o.reset(g)},[g,o]);let E=async d=>{try{(a?j.mutate:h.mutate)(d,{onSuccess:()=>{c({type:m._n.SUCCESS,message:a?"Invoice updated!":"Invoice created!",duration:3e3}),b.push(k.bw.INVOICES)},onError:a=>{c({type:m._n.ERROR,message:a?.message||"Failed to save invoice",duration:5e3})}})}catch(a){c({type:m._n.ERROR,message:"An unexpected error occurred",duration:5e3})}};if(!f)return(0,d.jsx)(n.kt,{fullScreen:!0,text:"Loading form..."});let F=h.isPending||j.isPending;return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("div",{children:(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:a?"Edit Invoice":"Create Invoice"})}),(0,d.jsxs)("form",{onSubmit:t(E),className:"bg-white rounded-lg shadow p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Invoice Details"}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Client ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsxs)("select",{...s("clientId"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,d.jsx)("option",{value:"",children:"Select a client"}),f?.map(a=>(0,d.jsx)("option",{value:a.id,children:a.name},a.id))]}),y.clientId&&(0,d.jsx)("p",{className:"mt-1 text-sm text-red-500",children:y.clientId.message})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),(0,d.jsxs)("select",{...s("currency"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,d.jsx)("option",{value:"USD",children:"USD"}),(0,d.jsx)("option",{value:"EUR",children:"EUR"}),(0,d.jsx)("option",{value:"GBP",children:"GBP"}),(0,d.jsx)("option",{value:"IDR",children:"IDR"})]})]}),(0,d.jsx)(n.zB,{...s("invoiceDate"),type:"date",label:"Invoice Date",error:y.invoiceDate,required:!0}),(0,d.jsx)(n.zB,{...s("dueDate"),type:"date",label:"Due Date",error:y.dueDate,required:!0})]})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Items"}),(0,d.jsx)(n.$n,{type:"button",variant:"secondary",size:"sm",onClick:()=>B({description:"",quantity:1,unitPrice:0,discount:0,tax:0}),children:"+ Add Item"})]}),(0,d.jsx)("div",{className:"space-y-3 border border-gray-200 rounded-lg p-4",children:A.map((a,b)=>(0,d.jsxs)("div",{className:"grid grid-cols-12 gap-2 pb-3 border-b border-gray-200 last:border-b-0",children:[(0,d.jsx)("div",{className:"col-span-4",children:(0,d.jsx)(n.zB,{...s(`items.${b}.description`),placeholder:"Product/Service",error:y.items?.[b]?.description,required:!0})}),(0,d.jsx)("div",{className:"col-span-2",children:(0,d.jsx)(n.zB,{...s(`items.${b}.quantity`,{valueAsNumber:!0}),type:"number",placeholder:"Qty",error:y.items?.[b]?.quantity,required:!0})}),(0,d.jsx)("div",{className:"col-span-3",children:(0,d.jsx)(n.zB,{...s(`items.${b}.unitPrice`,{valueAsNumber:!0}),type:"number",placeholder:"Price",error:y.items?.[b]?.unitPrice,required:!0})}),(0,d.jsx)("div",{className:"col-span-2 flex items-end",children:(0,d.jsx)(n.$n,{type:"button",variant:"danger",size:"sm",disabled:1===A.length,onClick:()=>C(b),fullWidth:!0,children:"Remove"})})]},a.id))})]}),(0,d.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,d.jsxs)("div",{className:"flex justify-between text-gray-700",children:[(0,d.jsx)("span",{children:"Subtotal:"}),(0,d.jsx)("span",{className:"font-medium",children:D.subtotal.toFixed(2)})]}),(0,d.jsxs)("div",{className:"flex justify-between text-gray-700",children:[(0,d.jsx)("span",{children:"Discount:"}),(0,d.jsxs)("span",{className:"font-medium",children:["-",D.totalDiscount.toFixed(2)]})]}),(0,d.jsxs)("div",{className:"flex justify-between text-gray-700",children:[(0,d.jsx)("span",{children:"Tax:"}),(0,d.jsxs)("span",{className:"font-medium",children:["+",D.totalTax.toFixed(2)]})]}),(0,d.jsxs)("div",{className:"border-t border-gray-300 pt-2 flex justify-between text-gray-900 font-semibold text-lg",children:[(0,d.jsx)("span",{children:"Total:"}),(0,d.jsx)("span",{children:D.grandTotal.toFixed(2)})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,d.jsx)("textarea",{...s("notes"),placeholder:"Add any notes or terms...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,d.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,d.jsx)(n.$n,{type:"button",variant:"secondary",onClick:()=>b.back(),disabled:F,children:"Cancel"}),(0,d.jsxs)(n.$n,{type:"submit",loading:F,disabled:F,children:[a?"Update":"Create"," Invoice"]})]})]})]})};var y=c(54720);let z=({isOpen:a,onClose:b,invoiceId:c,remainingAmount:f})=>{let[g,h]=(0,e.useState)(f),{addNotification:j}=(0,w.j)(),k=(0,i.L2)(a=>l.recordPayment(c,a));return(0,d.jsx)(n.aF,{isOpen:a,onClose:b,title:"Record Payment",size:"md",footer:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.$n,{variant:"secondary",onClick:b,disabled:k.isPending,children:"Cancel"}),(0,d.jsx)(n.$n,{loading:k.isPending,disabled:k.isPending,onClick:()=>{k.mutate({amount:g,paymentMethod:"bank_transfer"},{onSuccess:()=>{j({type:m._n.SUCCESS,message:"Payment recorded!",duration:3e3}),b()},onError:a=>{j({type:m._n.ERROR,message:a?.message||"Failed to record payment",duration:5e3})}})},children:"Record Payment"})]}),children:(0,d.jsx)("div",{className:"space-y-4",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),(0,d.jsx)("input",{type:"number",value:g,onChange:a=>h(parseFloat(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",max:f}),(0,d.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Remaining: ",f.toFixed(2)]})]})})})},A=({invoiceId:a})=>{let[b,c]=(0,e.useState)(!1),{addNotification:f}=(0,w.j)(),{data:g,isLoading:h,refetch:j}=(0,i.gf)(["invoice",a],()=>l.getInvoice(a)),k=(0,i.L2)(()=>l.sendInvoice(a)),o=(0,i.L2)(()=>l.generateShareLink(a));return h?(0,d.jsx)(n.kt,{fullScreen:!0,text:"Loading invoice..."}):g?(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Invoice ",g.invoiceNumber]}),(0,d.jsx)("p",{className:"text-gray-600 mt-1",children:(0,y.A)(new Date(g.invoiceDate),"MMM dd, yyyy")})]}),(0,d.jsx)(n.Wh,{status:g.status,size:"lg"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,d.jsxs)("div",{className:"col-span-2 space-y-6",children:[(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bill To"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900",children:g.client?.name}),(0,d.jsx)("p",{className:"text-gray-600",children:g.client?.email}),g.client?.address&&(0,d.jsx)("p",{className:"text-gray-600",children:g.client.address})]})]}),(0,d.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,d.jsxs)("table",{className:"w-full",children:[(0,d.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),(0,d.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Qty"}),(0,d.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Unit Price"}),(0,d.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Amount"})]})}),(0,d.jsx)("tbody",{className:"divide-y divide-gray-200",children:g.items.map((a,b)=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"px-6 py-4 text-gray-900",children:a.description}),(0,d.jsx)("td",{className:"px-6 py-4 text-right text-gray-900",children:a.quantity}),(0,d.jsxs)("td",{className:"px-6 py-4 text-right text-gray-900",children:[g.currency," ",a.unitPrice.toFixed(2)]}),(0,d.jsxs)("td",{className:"px-6 py-4 text-right text-gray-900 font-medium",children:[g.currency," ",(a.quantity*a.unitPrice).toFixed(2)]})]},b))})]})})]}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 space-y-3",children:[(0,d.jsxs)("div",{className:"flex justify-between text-gray-700",children:[(0,d.jsx)("span",{children:"Subtotal:"}),(0,d.jsxs)("span",{className:"font-medium",children:[g.currency," ",g.subtotal.toFixed(2)]})]}),g.totalDiscount>0&&(0,d.jsxs)("div",{className:"flex justify-between text-gray-700",children:[(0,d.jsx)("span",{children:"Discount:"}),(0,d.jsxs)("span",{className:"font-medium",children:["-",g.currency," ",g.totalDiscount.toFixed(2)]})]}),g.totalTax>0&&(0,d.jsxs)("div",{className:"flex justify-between text-gray-700",children:[(0,d.jsx)("span",{children:"Tax:"}),(0,d.jsxs)("span",{className:"font-medium",children:["+",g.currency," ",g.totalTax.toFixed(2)]})]}),(0,d.jsxs)("div",{className:"border-t border-gray-300 pt-3 flex justify-between text-gray-900 font-semibold text-lg",children:[(0,d.jsx)("span",{children:"Total:"}),(0,d.jsxs)("span",{children:[g.currency," ",g.grandTotal.toFixed(2)]})]}),(0,d.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-300",children:[(0,d.jsxs)("div",{className:"flex justify-between text-gray-700 mb-2",children:[(0,d.jsx)("span",{children:"Paid:"}),(0,d.jsxs)("span",{className:"font-medium",children:[g.currency," ",g.paidAmount.toFixed(2)]})]}),(0,d.jsxs)("div",{className:"flex justify-between text-gray-700",children:[(0,d.jsx)("span",{children:"Remaining:"}),(0,d.jsxs)("span",{className:"font-medium",children:[g.currency," ",g.remainingAmount.toFixed(2)]})]})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[g.status===m.Sx.DRAFT&&(0,d.jsx)(n.$n,{fullWidth:!0,variant:"primary",children:"Edit Invoice"}),g.status!==m.Sx.SENT&&g.status!==m.Sx.VIEWED&&(0,d.jsx)(n.$n,{fullWidth:!0,variant:"secondary",loading:k.isPending,disabled:k.isPending,onClick:()=>{k.mutate(void 0,{onSuccess:()=>{f({type:m._n.SUCCESS,message:"Invoice sent!",duration:3e3}),j()},onError:a=>{f({type:m._n.ERROR,message:a?.message||"Failed to send invoice",duration:5e3})}})},children:"Send Invoice"}),g.remainingAmount>0&&(0,d.jsx)(n.$n,{fullWidth:!0,variant:"secondary",onClick:()=>c(!0),children:"Record Payment"}),(0,d.jsx)(n.$n,{fullWidth:!0,variant:"secondary",loading:o.isPending,disabled:o.isPending,onClick:()=>{o.mutate(void 0,{onSuccess:a=>{navigator.clipboard.writeText(a.shareUrl),f({type:m._n.SUCCESS,message:"Share link copied to clipboard!",duration:3e3})},onError:a=>{f({type:m._n.ERROR,message:a?.message||"Failed to generate share link",duration:5e3})}})},children:"Share Link"})]}),g.dueDate&&(0,d.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,d.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,d.jsx)("strong",{children:"Due Date:"})," ",(0,y.A)(new Date(g.dueDate),"MMM dd, yyyy")]})})]})]}),(0,d.jsx)(z,{isOpen:b,onClose:()=>c(!1),invoiceId:a,remainingAmount:g.remainingAmount})]}):(0,d.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:"Invoice not found"})}},99593:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>r});var d=c(78157),e=c(31768),f=c(94496),g=c.n(f),h=c(58886),i=c(34514),j=c(79818);let k=()=>{let{user:a,logout:b}=(0,h.h)(),{sidebarOpen:c,setSidebarOpen:f}=(0,i.j)(),[k,l]=(0,e.useState)(!1);return(0,d.jsx)("nav",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-40",children:(0,d.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("button",{onClick:()=>f(!c),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:"☰"}),(0,d.jsx)(g(),{href:j.bw.DASHBOARD,className:"text-xl font-bold text-blue-600",children:"Zenvoyer"})]}),(0,d.jsx)("div",{className:"flex items-center gap-4",children:(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("button",{onClick:()=>l(!k),className:"flex items-center gap-2 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-semibold",children:a?.firstName?.charAt(0)}),(0,d.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[a?.firstName," ",a?.lastName]}),(0,d.jsx)("span",{className:"text-gray-600",children:"▼"})]}),k&&(0,d.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg py-1 z-50",children:[(0,d.jsx)(g(),{href:j.bw.PROFILE,className:"block px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>l(!1),children:"Profile Settings"}),(0,d.jsx)(g(),{href:j.bw.SECURITY,className:"block px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>l(!1),children:"Security"}),(0,d.jsx)("hr",{className:"my-1"}),(0,d.jsx)("button",{onClick:()=>{b(),l(!1)},className:"w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 transition-colors",children:"Logout"})]})]})})]})})};var l=c(71159),m=c(53417);let n=[{label:"Dashboard",href:j.bw.DASHBOARD,icon:"\uD83D\uDCCA"},{label:"Invoices",href:j.bw.INVOICES,icon:"\uD83D\uDCC4"},{label:"Clients",href:j.bw.CLIENTS,icon:"\uD83D\uDC65"},{label:"Products",href:j.bw.PRODUCTS,icon:"\uD83D\uDCE6"},{label:"Payments",href:j.bw.PAYMENTS,icon:"\uD83D\uDCB3"}],o=()=>{let a=(0,l.usePathname)(),{sidebarOpen:b}=(0,i.j)();return(0,d.jsxs)("aside",{className:(0,m.cn)("fixed left-0 top-16 bottom-0 bg-gray-900 text-white transition-all duration-300 ease-in-out z-30",b?"w-64":"w-20"),children:[(0,d.jsx)("nav",{className:"p-4 space-y-2",children:n.map(c=>{let e=a===c.href||a.startsWith(c.href+"/");return(0,d.jsxs)(g(),{href:c.href,className:(0,m.cn)("flex items-center gap-3 px-4 py-3 rounded-lg transition-colors",e?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),title:b?void 0:c.label,children:[(0,d.jsx)("span",{className:"text-xl flex-shrink-0",children:c.icon}),b&&(0,d.jsx)("span",{className:"text-sm font-medium",children:c.label})]},c.href)})}),(0,d.jsx)("div",{className:"absolute bottom-0 left-0 right-0 border-t border-gray-700 p-4 space-y-2",children:(0,d.jsxs)(g(),{href:j.bw.SETTINGS,className:(0,m.cn)("flex items-center gap-3 px-4 py-3 rounded-lg transition-colors",a===j.bw.SETTINGS?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),title:b?void 0:"Settings",children:[(0,d.jsx)("span",{className:"text-xl flex-shrink-0",children:"⚙️"}),b&&(0,d.jsx)("span",{className:"text-sm font-medium",children:"Settings"})]})})]})};var p=c(90200);let q=({children:a})=>{let{isAuthenticated:b,initalized:c}=(0,h.h)(),{sidebarOpen:e}=(0,i.j)();return c?b?(0,d.jsx)(p.tH,{children:(0,d.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,d.jsx)(k,{}),(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)(o,{}),(0,d.jsx)("main",{className:(0,m.cn)("flex-1 transition-all duration-300 ease-in-out",e?"ml-64":"ml-20"),children:(0,d.jsx)("div",{className:"p-6 min-h-[calc(100vh-64px)]",children:a})})]})]})}):(0,d.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:"Please log in to continue."}):(0,d.jsx)(p.kt,{fullScreen:!0})};function r({children:a}){return(0,d.jsx)(q,{children:a})}}};